"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[6578],{43824:(e,t,s)=>{s.d(t,{$_:()=>o,U_:()=>r,i1:()=>l,mU:()=>i});const n=s(60470).apiSlice.injectEndpoints({tagTypes:["AllNewUserDiscount","singleDiscount"],endpoints:e=>({getAllNewUserDiscount:e.query({query:()=>({url:"/newUserDiscount",method:"GET"}),providesTags:["AllNewUserDiscount"]}),getSingleNewUserDiscountById:e.query({query:e=>({url:"/newUserDiscount/".concat(e),method:"GET",headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),providesTags:["singleDiscount"]}),addNewCustomerDiscount:e.mutation({query:e=>({url:"/newUserDiscount",method:"POST",body:e}),invalidatesTags:["AllNewUserDiscount"]}),updateSingleNewUserDiscountById:e.mutation({query:e=>{let{id:t,data:s}=e;return{url:"/newUserDiscount/".concat(t),method:"PUT",body:s}},invalidatesTags:["AllNewUserDiscount"]}),deleteSingleNewUserDiscountById:e.mutation({query:e=>({url:"/newUserDiscount/".concat(e),method:"DELETE",body:e}),invalidatesTags:["AllNewUserDiscount","singleDiscount"]})})}),{useGetAllNewUserDiscountQuery:i,useGetSingleNewUserDiscountByIdQuery:a,useAddNewCustomerDiscountMutation:l,useUpdateSingleNewUserDiscountByIdMutation:r,useDeleteSingleNewUserDiscountByIdMutation:o}=n},31655:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(72282),i=s(24846),a=s(78983),l=s(72791),r=s(61134),o=s(80184);const d=e=>{let{showModal:t,setShowModal:s,offerPropsData:d,title:c,handlePostOrderFunction:u,isLoading:m,isUpdate:h,defaultOfferData:x,handleUpdateFunction:p}=e;const{reset:D,register:g,handleSubmit:y,control:j}=(0,r.cI)(),[f,b]=(0,l.useState)(""),[w,v]=(0,l.useState)("");return(0,o.jsxs)(a.Tk,{visible:t,onClose:()=>{s(!1)},className:"offerModal",children:[(0,o.jsxs)(a.p0,{closeButton:!0,children:[c," "]}),(0,o.jsx)(a.sD,{children:(0,o.jsx)(a.lx,{id:"handleSubmitForm",onSubmit:y((e=>{const t=new Date(f).getTime(),s=new Date(w).getTime();let n=null;t&&s&&(n=s-t+(t-Date.now())+Date.now());const i={...e,discount:parseInt(e.discount),startDate:f||x.startDate,endDate:w||x.endDate,timeStamps:n||(null===x||void 0===x?void 0:x.timeStamps),status:"active"};if(h){const e=null===x||void 0===x?void 0:x._id;p({data:i,id:e})}else u(i),D()})),children:(0,o.jsxs)(a.rb,{className:"g-3",children:[(0,o.jsx)(a.b7,{xs:12,children:(0,o.jsx)(a.jO,{type:"text",id:"discountInputField",label:"Offer Name",defaultValue:null===x||void 0===x?void 0:x.name,placeholder:"Enter offer name","aria-describedby":"discountInputField",min:"0",...g("name",{required:!0,min:0,max:100})})}),(0,o.jsxs)(a.b7,{xs:12,children:[(0,o.jsx)("label",{className:"mb-2",children:"Discount Type"}),(0,o.jsx)("br",{}),(0,o.jsx)(a.EC,{inline:!0,type:"radio",name:"discountTypeOptions",id:"discountTypePercentage",label:"Percentage",defaultChecked:"percentage"===(null===x||void 0===x?void 0:x.discountType),value:"percentage",...g("discountType",{required:!0})}),(0,o.jsx)(a.EC,{inline:!0,type:"radio",name:"discountTypeOptions",id:"discountTypeFixedAmount",defaultChecked:"fixedAmount"===(null===x||void 0===x?void 0:x.discountType),label:"Fixed Amount",value:"fixedAmount",...g("discountType",{required:!0})})]}),(0,o.jsx)(a.b7,{xs:12,children:(0,o.jsx)(a.jO,{type:"number",id:"discountInputField",label:"Discount",placeholder:"Enter Discount",defaultValue:null===x||void 0===x?void 0:x.discount,"aria-describedby":"discountInputField",min:"0",...g("discount",{required:!0,min:0,max:100})})}),(0,o.jsxs)(a.b7,{xs:6,children:[(0,o.jsx)("label",{className:"text-primary",children:"Start Date"}),x&&(0,o.jsxs)("label",{htmlFor:"",className:" d-flex justify-content-between mb-1",children:[(0,o.jsx)("span",{children:new Date(f).toLocaleDateString()}),(0,o.jsx)("span",{children:new Date(f).toLocaleTimeString()})]}),(0,o.jsx)(a.jO,{placeholder:"Enter Start Date","aria-describedby":"startDate",defaultValue:f,onChange:e=>b(e.target.value),required:!x,onFocus:e=>e.target.type="datetime-local",onBlur:e=>e.target.type="text"})]}),(0,o.jsxs)(a.b7,{xs:6,children:[(0,o.jsx)("label",{className:"text-primary",children:"End Date"}),x&&(0,o.jsxs)("label",{htmlFor:"",className:" d-flex justify-content-between mb-1",children:[(0,o.jsx)("span",{children:new Date(w).toLocaleDateString()}),(0,o.jsx)("span",{children:new Date(w).toLocaleTimeString()})]}),(0,o.jsx)(a.jO,{placeholder:"Enter End Date","aria-describedby":"endDate",defaultValue:w,required:!x,onChange:e=>v(e.target.value),onFocus:e=>e.target.type="datetime-local",onBlur:e=>e.target.type="text"})]})]})})}),(0,o.jsxs)(a.Ym,{children:[(0,o.jsx)(a.u5,{color:"secondary",onClick:()=>{s(!1)},children:"Cancel"}),(0,o.jsxs)(a.u5,{disabled:m,form:"handleSubmitForm",type:"submit",color:"success",className:"text-white",children:[(0,o.jsx)(i.Z,{icon:n.F,className:"me-2"})," ",h?(0,o.jsx)(o.Fragment,{children:"Update"}):(0,o.jsx)(o.Fragment,{children:m?"Loading..":"Save"})]})]})]})},c=(0,l.memo)(d)},36578:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var n=s(78983),i=s(72791),a=s(57689),l=s(9085),r=s(43824),o=s(31655),d=s(80184);const c=()=>{const[e,t]=(0,i.useState)(!1),s=(0,a.s0)(),[c,{isLoading:u,isError:m,isSuccess:h,error:x}]=(0,r.i1)();return(0,i.useEffect)((()=>{var e;h&&l.Am.success("Offer created successfully"),m&&l.Am.error((null===x||void 0===x||null===(e=x.data)||void 0===e?void 0:e.message)||"could not create the offer")}),[h,m]),(0,i.useEffect)((()=>{h&&s(-1)}),[h]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.u5,{onClick:()=>{t(!0)},children:"New Customer Offer"}),(0,d.jsx)(o.Z,{setShowModal:t,showModal:e,offerPropsData:[],title:"New customer offer",handlePostOrderFunction:c,isLoading:u})]})},u=()=>(0,d.jsx)(n.rb,{children:(0,d.jsx)(n.b7,{xs:12,children:(0,d.jsx)("div",{className:"mb-4 d-flex gap-2 justify-content-center align-items-center mt-4 flex-wrap",children:(0,d.jsx)(c,{})})})})}}]);
//# sourceMappingURL=6578.b7468528.chunk.js.map