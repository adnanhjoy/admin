"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[9538],{26573:(e,a,l)=>{l.d(a,{RJ:()=>s,d5:()=>d,qV:()=>n,vN:()=>i,wv:()=>r});const t=l(60470).apiSlice.injectEndpoints({tagTypes:["FlashSaleOffer","SingleFlashSaleOffer"],endpoints:e=>({getFlashSaleOffer:e.query({query:()=>({url:"/flashSale-offer",method:"GET"}),providesTags:["FlashSaleOffer"]}),getSingleFlashSaleOffer:e.query({query:e=>({url:"/flashSale-offer/".concat(e),method:"GET",headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),providesTags:["SingleFlashSaleOffer"]}),addFlashSaleOffer:e.mutation({query:e=>({url:"/flashSale-offer",method:"POST",body:e}),invalidatesTags:["FlashSaleOffer"]}),updateSingleFlashSaleOffer:e.mutation({query:e=>{let{id:a,data:l}=e;return{url:"/flashSale-offer/".concat(a),method:"PUT",body:l}},invalidatesTags:["FlashSaleOffer"]}),deleteSingleFlashSaleOfferById:e.mutation({query:e=>({url:"/flashSale-offer/".concat(e),method:"DELETE",body:e}),invalidatesTags:["FlashSaleOffer","SingleFlashSaleOffer"]})})}),{useGetFlashSaleOfferQuery:s,useGetSingleFlashSaleOfferQuery:r,useAddFlashSaleOfferMutation:i,useUpdateSingleFlashSaleOfferMutation:d,useDeleteSingleFlashSaleOfferByIdMutation:n}=t},9538:(e,a,l)=>{l.r(a),l.d(a,{default:()=>j});var t=l(78983),s=l(72791),r=l(57689),i=l(9085),d=l(43034),n=l(26573),o=l(72282),u=l(24846),c=l(63108),f=l(61134),h=l(5560),m=l(84579),v=l(73779);const x=e=>{const a=[];return null===e||void 0===e||e.forEach((e=>{a.push({value:e,label:e})})),a};var S=l(80184);const p=e=>{var a,l,i,d,n;let{onSubmit:p,loading:g,data:j,startDate:y,setStartDate:b,endDate:D,color:F,setColor:O,setEndDate:T}=e;const{id:E}=(0,r.UO)(),{handleSubmit:N,control:q,register:w,errors:C,setValue:L}=(0,f.cI)(),{data:k,isLoading:A,isError:I}=(0,m.CT)(),U=null===k||void 0===k||null===(a=k.data)||void 0===a?void 0:a.map((e=>({value:null===e||void 0===e?void 0:e.name,label:null===e||void 0===e?void 0:e.name})));(0,s.useEffect)((()=>{if(j){for(const e in j)L(e,j[e]);b(j.startDate),T(j.endDate)}}),[j,L]);return(0,S.jsxs)(t.lx,{onSubmit:N(p),children:[(0,S.jsxs)(t.b7,{xs:12,children:[(0,S.jsx)("label",{className:"w-100",children:"Offer name"}),(0,S.jsx)(t.jO,{type:"text",id:"titleInputField",placeholder:"Enter types name","aria-describedby":"titleInputField",...w("name",{required:!0})}),"required"===(null===C||void 0===C||null===(l=C.name)||void 0===l?void 0:l.type)&&(0,S.jsx)("p",{className:"text-danger",children:"Name is required"})]}),(0,S.jsxs)(t.b7,{xs:12,children:[(0,S.jsx)("label",{className:"mb-0",children:"Select types for make offer"}),(0,S.jsx)(f.Qr,{control:q,name:"offerType",rules:{required:!0},render:e=>{let{field:{onChange:a,value:l,name:t,ref:s}}=e;return(0,S.jsx)(h.ZP,{className:"mt-2",defaultValue:x(null===j||void 0===j?void 0:j.offerType),inputRef:s,options:U,value:null===U||void 0===U?void 0:U.find((e=>(null===e||void 0===e?void 0:e.value)===l)),onChange:e=>a(null===e||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.value))),isMulti:!0})}}),"required"===(null===C||void 0===C||null===(i=C.offerType)||void 0===i?void 0:i.type)&&(0,S.jsx)("p",{className:"text-danger",children:"OfferType is required"})]}),(0,S.jsxs)(t.rb,{children:[(0,S.jsxs)(t.b7,{xs:6,children:[(0,S.jsx)("label",{className:"text-primary",children:"Start Date"}),j&&(0,S.jsxs)("label",{htmlFor:"",className:" d-flex justify-content-between mb-1",children:[(0,S.jsx)("span",{children:new Date(y).toLocaleDateString()}),(0,S.jsx)("span",{children:new Date(y).toLocaleTimeString()})]}),(0,S.jsx)(t.jO,{placeholder:"Enter Start Date","aria-describedby":"startDate",defaultValue:y,onChange:e=>b(e.target.value),required:!j,onFocus:e=>e.target.type="datetime-local",onBlur:e=>e.target.type="text"}),"required"===(null===C||void 0===C||null===(d=C.startDate)||void 0===d?void 0:d.type)&&(0,S.jsx)("p",{className:"text-danger",children:"Start date is required"})]}),(0,S.jsxs)(t.b7,{xs:6,children:[(0,S.jsx)("label",{className:"text-primary",children:"End Date"}),j&&(0,S.jsxs)("label",{htmlFor:"",className:" d-flex justify-content-between mb-1",children:[(0,S.jsx)("span",{children:new Date(D).toLocaleDateString()}),(0,S.jsx)("span",{children:new Date(D).toLocaleTimeString()})]}),(0,S.jsx)(t.jO,{placeholder:"Enter End Date","aria-describedby":"endDate",defaultValue:D,required:!j,onChange:e=>T(e.target.value),onFocus:e=>e.target.type="datetime-local",onBlur:e=>e.target.type="text"}),"required"===(null===C||void 0===C||null===(n=C.endDate)||void 0===n?void 0:n.type)&&(0,S.jsx)("p",{className:"text-danger",children:"End date is required"})]}),(0,S.jsxs)(t.b7,{className:"mt-2",xs:12,children:[(0,S.jsxs)("label",{className:"mb-2",children:["Background Color ",(0,S.jsx)("span",{className:"text-danger",children:"*"})]}),(0,S.jsx)(c.xS,{width:"350px",color:F,onChangeComplete:e=>{O(e.hex)}}),(0,S.jsxs)("p",{className:"mt-2",style:{color:"".concat(F)},children:["Selected color: ",F]})]})]}),(0,S.jsxs)("div",{className:"text-end  ",children:[(0,S.jsx)(v.Z,{}),(0,S.jsxs)(t.u5,{type:"submit",color:"success",className:"mt-3 text-white",children:[(0,S.jsx)(u.Z,{icon:o.F,className:"me-2"}),g?"Loading...":E?"Update":"Save"]})]})]})};var g=l(39432);const j=()=>{const[e,a]=(0,s.useState)(!0),{id:l}=(0,r.UO)(),[o,u]=(0,s.useState)(""),[c,f]=(0,s.useState)(""),h=(0,r.s0)(),[m,v]=(0,s.useState)("#FFFFFF"),{data:x,isLoading:j,isError:y,error:b}=(0,n.wv)(l,{skip:e}),[D,{isLoading:F,isError:O,isSuccess:T,error:E}]=(0,n.vN)(),[N,{isLoading:q,isError:w,isSuccess:C,error:L}]=(0,n.d5)();return(0,s.useEffect)((()=>{var e,a;O&&i.Am.error((null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.message)||"Added Failed"),w&&i.Am.error((null===L||void 0===L||null===(a=L.data)||void 0===a?void 0:a.message)||"Updated Failed")}),[O,w]),(0,s.useEffect)((()=>{T&&h(-1),C&&h(-1)}),[T,C]),(0,s.useEffect)((()=>{l&&a(!1)}),[l]),(0,S.jsxs)(t.xH,{children:[(0,S.jsx)(g.Z,{title:l?"Customize flashSale offer":"Add flashSale offer"}),j?(0,S.jsx)(d.Z,{}):(0,S.jsx)(t.sl,{children:(0,S.jsx)(p,{loading:q||F,data:null===x||void 0===x?void 0:x.result,onSubmit:e=>{const a=new Date(o).getTime(),t=new Date(c).getTime()-a+(a-Date.now())+Date.now(),s=null===x||void 0===x?void 0:x.result,r={...s,name:e.name||(null===s||void 0===s?void 0:s.name),startDate:o||(null===s||void 0===s?void 0:s.startDate),endDate:c||(null===s||void 0===s?void 0:s.startDate),timeStamps:t||(null===s||void 0===s?void 0:s.timeStamps),offerType:e.offerType||(null===s||void 0===s?void 0:s.offerType),status:"active",color:m};l?N({id:l,data:r}):D(r)},startDate:o,setStartDate:u,endDate:c,setEndDate:f,color:m,setColor:v})})]})}}}]);
//# sourceMappingURL=9538.356edc6f.chunk.js.map