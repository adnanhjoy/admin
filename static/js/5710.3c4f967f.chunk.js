"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[5710],{37276:(e,s,a)=>{a.r(s),a.d(s,{default:()=>m});var i=a(28671),t=a(6145),l=a(93946),r=a(65043),d=a(33637),o=a(73216),n=a(42145),u=a(82731),c=a(73747),p=a(96208),v=a(20246),g=a(61297),f=a(70579);const m=()=>{const{id:e}=(0,o.g)(),[s,a]=(0,r.useState)(!0),[m,S]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[y,j]=(0,r.useState)(""),[b,P]=(0,r.useState)([]),[N,T]=(0,r.useState)(),[k,D]=(0,r.useState)(""),[O,E]=(0,r.useState)([]),[F,w]=(0,r.useState)(""),[C,J]=(0,r.useState)(),[A,I]=(0,r.useState)([]),[L,{isLoading:M,isSuccess:q,isError:z,error:R}]=(0,v.ZN)(),[V,{isLoading:_,isSuccess:B,isError:Q,error:Z}]=(0,v.P5)(),{data:K,isLoading:U,isError:W}=(0,v.PF)(e,{skip:s}),{data:$,isLoading:G,isError:H}=(0,p.sB)();(0,r.useMemo)((()=>{var e,s;z&&n.oR.error((null===R||void 0===R||null===(e=R.data)||void 0===e?void 0:e.message)||"Product updated failed"),Q&&n.oR.error((null===Z||void 0===Z||null===(s=Z.data)||void 0===s?void 0:s.message)||"Product added failed")}),[z,Q]);const X=(0,o.Zp)();(0,r.useEffect)((()=>{B&&X(-1),q&&X(-1)}),[q,B]),(0,r.useMemo)((()=>{var s,i,t,l,r,d,o;e&&(a(!1),P(null===K||void 0===K||null===(s=K.result)||void 0===s?void 0:s.tags),S(null===K||void 0===K||null===(i=K.result)||void 0===i?void 0:i.description),x(null===K||void 0===K||null===(t=K.result)||void 0===t?void 0:t.shortDescription),D(null===K||void 0===K||null===(l=K.result)||void 0===l?void 0:l.flashSaleOfferType),w(null===K||void 0===K||null===(r=K.result)||void 0===r||null===(d=r.manufacturer)||void 0===d?void 0:d._id),J(null===K||void 0===K||null===(o=K.result)||void 0===o?void 0:o.slug))}),[e,null===K||void 0===K?void 0:K.result]);return(0,f.jsx)(l.sK,{children:(0,f.jsx)(l.UF,{xs:12,children:(0,f.jsxs)(l.E$,{className:"mb-4",children:[(0,f.jsx)(l.V0,{children:(0,f.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,f.jsxs)("strong",{children:[e?"Edit":"Add"," Product"]}),(0,f.jsxs)("div",{className:"text-end",children:[(0,f.jsxs)(l.Q_,{disabled:_||M,type:"submit",form:"addProductForm1",color:"success",className:"",children:[(0,f.jsx)(t.A,{icon:i.M,className:"me-2"}),_||M?"Loading...":" Save"]}),(0,f.jsx)(l.jl,{content:"Back",children:(0,f.jsx)(l.Q_,{onClick:()=>X(-1),color:"",className:"border ms-2",children:(0,f.jsx)(d.A,{fluid:!0,src:c,style:{width:"20px"}})})})]})]})}),(0,f.jsx)(l.W6,{children:U?(0,f.jsx)(g.A,{}):W?(0,f.jsx)("p",{children:"There was an error"}):(0,f.jsx)(u.A,{images:O,setImages:E,data:null===K||void 0===K?void 0:K.result,description:m,setDescription:S,shortDescription:h,setShortDescription:x,specification:y,setSpecification:j,productTags:b,setProductTags:P,selectedStatus:N,setSelectedStatus:T,onSubmit:s=>{var a,i,t;const l=new FormData;for(const e of Object.keys(O))l.append("images",s.images[e]);l.append("flashSale",!0),s.name&&l.append("name",s.name),s.altTag&&l.append("altTag",s.altTag),m&&l.append("description",m),h&&l.append("shortDescription",h),y&&l.append("specification",y),k&&l.append("flashSaleOfferType",k),C&&l.append("slug",C),F&&"Pick one"!==F&&l.append("manufacturer",F),s.status&&l.append("status",s.status),s.expireDate&&l.append("expireDate",s.expireDate),s.model&&l.append("model",s.model),s.price&&l.append("price",parseFloat(s.price)),s.offerPrice&&l.append("offerPrice",parseFloat(s.offerPrice)),s.discountPercentage&&l.append("discountPercentage",parseFloat(s.discountPercentage)||0),s.quantity&&l.append("quantity",parseInt(s.quantity)),b&&l.append("tags",JSON.stringify(b)),s.color&&l.append("color",JSON.stringify(null===s||void 0===s?void 0:s.color)),s.size&&l.append("size",JSON.stringify(null===s||void 0===s?void 0:s.size)),null!==(a=s.categories)&&void 0!==a&&a.value&&l.append("categories",JSON.stringify(null===s||void 0===s?void 0:s.categories.value)),null!==(i=s.subcategories)&&void 0!==i&&i.value&&l.append("subcategories",JSON.stringify(null===s||void 0===s?void 0:s.subcategories.value)),null!==(t=s.subcategoryChildren)&&void 0!==t&&t.value&&l.append("subcategoryChildren",JSON.stringify(null===s||void 0===s?void 0:s.subcategoryChildren.value)),e?(A.forEach((e=>{l.append("prevImage",e)})),L({id:e,data:l})):V(l)},remainingImages:A,setRemainingImages:I,setFlashSaleType:D,flashSaleType:k,flashSale:!0,allTypes:null===$||void 0===$?void 0:$.data,manufacturer:F,setManufacturer:w,slugValue:C,setSlugValue:J})})]})})})}}}]);
//# sourceMappingURL=5710.3c4f967f.chunk.js.map