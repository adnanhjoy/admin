"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[4481],{24481:(e,s,i)=>{i.r(s),i.d(s,{default:()=>b});var l=i(93946),t=i(65043),d=i(73216),a=i(42145),r=i(28671),u=i(6145),n=i(33637),o=i(24858),c=i(94404),m=i(70579);const p=e=>{var s,i,d,a;let{data:p,onSubmit:g,updateLoading:x,addLoading:h,error:v}=e;const{register:j,handleSubmit:R,setValue:y,formState:{errors:f}}=(0,o.mN)();return(0,t.useEffect)((()=>{if(p)for(const e in p)y(e,p[e])}),[p,y]),(0,m.jsxs)(l.qI,{encType:"multipart/form-data",onSubmit:R(g),children:[(0,m.jsxs)(l.sK,{className:"g-3",children:[(0,m.jsxs)(l.UF,{xs:12,children:[(0,m.jsx)(l.OG,{type:"text",id:"titleInputField",label:"Title",placeholder:"Enter Title","aria-describedby":"titleInputField",...j("title",{required:{value:!0,message:"Title is required"}})}),"required"===(null===f||void 0===f||null===(s=f.title)||void 0===s?void 0:s.type)&&(0,m.jsx)("p",{className:"text-danger",children:f.title.message})]}),(0,m.jsxs)(l.UF,{xs:12,children:[(0,m.jsx)(l.Im,{id:"rulesDescriptionTextareaField",label:"Description",placeholder:"Enter Description","aria-describedby":"rulesDescriptionTextareaField",rows:"3",...j("description",{required:{value:!1,message:"Rules description is required"}})}),"required"===(null===f||void 0===f||null===(i=f.description)||void 0===i?void 0:i.type)&&(0,m.jsx)("p",{className:"text-danger",children:f.description.message})]}),(0,m.jsxs)(l.UF,{xs:12,children:[(0,m.jsx)(l.OG,{type:"file",id:"fileInputField",name:"image",label:"Rules Image",placeholder:"Enter image","aria-describedby":"imageInputField",...j("image",{required:{value:!0,message:"Image is required"}})}),"required"===(null===f||void 0===f||null===(d=f.title)||void 0===d?void 0:d.type)&&(0,m.jsx)("p",{className:"text-danger",children:f.title.message}),(null===p||void 0===p?void 0:p.image)&&(0,m.jsx)(l.UF,{className:"mt-2",md:3,xs:1,children:(0,m.jsx)(n.A,{src:null===p||void 0===p?void 0:p.image,alt:"Rules Img",fluid:!0})})]})]}),v&&(0,m.jsx)("p",{className:"text-danger mt-2 text-end",children:null===v||void 0===v||null===(a=v.data)||void 0===a?void 0:a.message}),(0,m.jsxs)("div",{className:"text-end",children:[(0,m.jsx)(c.A,{}),(0,m.jsx)(l.Q_,{type:"submit",color:"success",className:"mt-3 text-white",children:x||h?"Loading":(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.A,{icon:r.M,className:"me-2"}),p?"Update":"Save"]})})]})]})},g=(0,t.memo)(p);const x=i(61347).apiSlice.injectEndpoints({tagTypes:["Rules","SingleRules"],endpoints:e=>({getAllRules:e.query({query:()=>({url:"/rules",method:"GET"}),providesTags:["Rules"]}),getSingleRules:e.query({query:e=>({url:"/rules/".concat(e),method:"GET"}),invalidatesTags:["Rules"],providesTags:["SingleRules"]}),addRules:e.mutation({query:e=>({url:"/rules",method:"POST",body:e}),invalidatesTags:["Rules"]}),updateRules:e.mutation({query:e=>{let{id:s,data:i}=e;return{url:"/rules/".concat(s),method:"PUT",body:i}},invalidatesTags:["Rules","SingleRules"]}),deleteRules:e.mutation({query:e=>({url:"/Rules/".concat(e),method:"DELETE",body:e,headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),invalidatesTags:["Rules"]})})}),{useAddRulesMutation:h,useGetAllRulesQuery:v,useDeleteRulesMutation:j,useGetSingleRulesQuery:R,useUpdateRulesMutation:y}=x;var f=i(61297);const b=()=>{const{id:e}=(0,d.g)(),[s,i]=(0,t.useState)(!0),r=(0,d.Zp)(),{data:u,isLoading:n,isError:o}=R(e,{skip:s}),[c,{isLoading:p,isSuccess:x,error:v}]=h(),[j,{isLoading:b,isSuccess:S,isError:E}]=y();(0,t.useEffect)((()=>{e&&i(!1)}),[e]);return(0,t.useEffect)((()=>{a.oR.dismiss(),x&&a.oR.success("Added successfully",{id:"aSuccess"}),S&&a.oR.success("Updated successfully",{id:"uSuccess"}),E&&a.oR.error("Update failed",{id:"uError"}),v&&a.oR.error("Added failed",{id:"aError"})}),[E,S,x,v]),(0,t.useEffect)((()=>{x&&r(-1),S&&r(-1)}),[x,S]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(l.sK,{children:(0,m.jsx)(l.UF,{xs:12,children:(0,m.jsxs)(l.E$,{className:"mb-4",children:[(0,m.jsx)(l.V0,{children:(0,m.jsxs)("strong",{children:[e?"Edit":"Add"," Rules"]})}),(0,m.jsx)(l.W6,{children:n?(0,m.jsx)(f.A,{}):(0,m.jsx)(g,{addLoading:p,updateLoading:b,data:null===u||void 0===u?void 0:u.result,onSubmit:s=>{const i=new FormData,l=s.image[0];i.append("image",l),i.append("title",s.title),i.append("description",s.description),e?j({id:e,data:i}):c(i)},error:v})})]})})})})}}}]);
//# sourceMappingURL=4481.846bb041.chunk.js.map