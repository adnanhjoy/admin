"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[625],{84579:(e,s,a)=>{a.d(s,{CT:()=>i,XX:()=>l,_3:()=>d,ez:()=>r,ih:()=>n});const t=a(60470).apiSlice.injectEndpoints({tagTypes:["AllTypes","SingleTypes"],endpoints:e=>({getAllTypes:e.query({query:()=>({url:"/flashSale-types",method:"GET"}),providesTags:["AllTypes"]}),getSingleTypes:e.query({query:e=>({url:"/flashSale-types/".concat(e),method:"GET"}),providesTags:["SingleTypes"]}),deleteSingleTypes:e.mutation({query:e=>({url:"/flashSale-types/".concat(e),method:"DELETE"}),invalidatesTags:["AllTypes"]}),updateSingleTypes:e.mutation({query:e=>{let{id:s,data:a}=e;return{url:"/flashSale-types/".concat(s),method:"PUT",body:a}},invalidatesTags:["AllTypes","SingleTypes"]}),addSingleTypes:e.mutation({query:e=>({url:"/flashSale-types",method:"POST",body:e}),invalidatesTags:["AllTypes"]})})}),{useGetAllTypesQuery:i,useGetSingleTypesQuery:l,useDeleteSingleTypesMutation:d,useAddSingleTypesMutation:n,useUpdateSingleTypesMutation:r}=t},83812:(e,s,a)=>{a.r(s),a.d(s,{default:()=>S});var t=a(72282),i=a(24846),l=a(78983),d=a(72791),n=a(92592),r=a(57689),o=a(9085),u=a(94444),p=a(98859),c=a(84579),g=a(67060),v=a(43034),y=a(80184);const S=()=>{const{id:e}=(0,r.UO)(),[s,a]=(0,d.useState)(!0),[S,f]=(0,d.useState)(""),[m,T]=(0,d.useState)(""),[h,x]=(0,d.useState)(""),[b,j]=(0,d.useState)([]),[E,P]=(0,d.useState)(),[N,A]=(0,d.useState)(""),[D,O]=(0,d.useState)([]),[q,k]=(0,d.useState)(""),[C,w]=(0,d.useState)(),[F,I]=(0,d.useState)([]),[J,{isLoading:L,isSuccess:M,isError:z,error:G}]=(0,g.Ey)(),[Z,{isLoading:Q,isSuccess:U,isError:V,error:X}]=(0,g.Qw)(),{data:_,isLoading:B,isError:H}=(0,g.T9)(e,{skip:s}),{data:R,isLoading:K,isError:W}=(0,c.CT)();(0,d.useMemo)((()=>{var e,s;z&&o.Am.error((null===G||void 0===G||null===(e=G.data)||void 0===e?void 0:e.message)||"Product updated failed"),V&&o.Am.error((null===X||void 0===X||null===(s=X.data)||void 0===s?void 0:s.message)||"Product added failed")}),[z,V]);const Y=(0,r.s0)();(0,d.useEffect)((()=>{U&&Y(-1),M&&Y(-1)}),[M,U]),(0,d.useMemo)((()=>{var s,t,i,l,d,n,r;e&&(a(!1),j(null===_||void 0===_||null===(s=_.result)||void 0===s?void 0:s.tags),f(null===_||void 0===_||null===(t=_.result)||void 0===t?void 0:t.description),T(null===_||void 0===_||null===(i=_.result)||void 0===i?void 0:i.shortDescription),A(null===_||void 0===_||null===(l=_.result)||void 0===l?void 0:l.flashSaleOfferType),k(null===_||void 0===_||null===(d=_.result)||void 0===d||null===(n=d.manufacturer)||void 0===n?void 0:n._id),w(null===_||void 0===_||null===(r=_.result)||void 0===r?void 0:r.slug))}),[e,null===_||void 0===_?void 0:_.result]);return(0,y.jsx)(l.rb,{children:(0,y.jsx)(l.b7,{xs:12,children:(0,y.jsxs)(l.xH,{className:"mb-4",children:[(0,y.jsx)(l.bn,{children:(0,y.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,y.jsxs)("strong",{children:[e?"Edit":"Add"," Product"]}),(0,y.jsxs)("div",{className:"text-end",children:[(0,y.jsxs)(l.u5,{disabled:Q||L,type:"submit",form:"addProductForm1",color:"success",className:"",children:[(0,y.jsx)(i.Z,{icon:t.F,className:"me-2"}),Q||L?"Loading...":" Save"]}),(0,y.jsx)(l.If,{content:"Back",children:(0,y.jsx)(l.u5,{onClick:()=>Y(-1),color:"",className:"border ms-2",children:(0,y.jsx)(n.Z,{fluid:!0,src:p,style:{width:"20px"}})})})]})]})}),(0,y.jsx)(l.sl,{children:B?(0,y.jsx)(v.Z,{}):H?(0,y.jsx)("p",{children:"There was an error"}):(0,y.jsx)(u.Z,{images:D,setImages:O,data:null===_||void 0===_?void 0:_.result,description:S,setDescription:f,shortDescription:m,setShortDescription:T,specification:h,setSpecification:x,productTags:b,setProductTags:j,selectedStatus:E,setSelectedStatus:P,onSubmit:s=>{var a,t,i;const l=new FormData;for(const e of Object.keys(D))l.append("images",s.images[e]);l.append("flashSale",!0),s.name&&l.append("name",s.name),s.altTag&&l.append("altTag",s.altTag),S&&l.append("description",S),m&&l.append("shortDescription",m),h&&l.append("specification",h),N&&l.append("flashSaleOfferType",N),l.append("productType","flash-sale"),C&&l.append("slug",C),q&&"Pick one"!==q&&l.append("manufacturer",q),s.status&&l.append("status",s.status),s.expireDate&&l.append("expireDate",s.expireDate),s.model&&l.append("model",s.model),s.price&&l.append("price",parseFloat(s.price)),s.offerPrice&&l.append("offerPrice",parseFloat(s.offerPrice)),s.discountPercentage&&l.append("discountPercentage",parseFloat(s.discountPercentage)||0),s.quantity&&l.append("quantity",parseInt(s.quantity)),b&&l.append("tags",JSON.stringify(b)),s.color&&l.append("color",JSON.stringify(null===s||void 0===s?void 0:s.color)),s.size&&l.append("size",JSON.stringify(null===s||void 0===s?void 0:s.size)),null!==(a=s.categories)&&void 0!==a&&a.value&&l.append("categories",JSON.stringify(null===s||void 0===s?void 0:s.categories.value)),null!==(t=s.subcategories)&&void 0!==t&&t.value&&l.append("subcategories",JSON.stringify(null===s||void 0===s?void 0:s.subcategories.value)),null!==(i=s.subcategoryChildren)&&void 0!==i&&i.value&&l.append("subcategoryChildren",JSON.stringify(null===s||void 0===s?void 0:s.subcategoryChildren.value)),e?(F.forEach((e=>{l.append("prevImage",e)})),J({id:e,data:l})):Z(l)},remainingImages:F,setRemainingImages:I,setFlashSaleType:A,flashSaleType:N,flashSale:!0,allTypes:null===R||void 0===R?void 0:R.data,manufacturer:q,setManufacturer:k,slugValue:C,setSlugValue:w})})]})})})}}}]);
//# sourceMappingURL=625.995b0fbd.chunk.js.map