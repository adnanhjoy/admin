"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[6872],{2196:(e,o,t)=>{t.d(o,{KN:()=>a,OT:()=>i,Wt:()=>d,gn:()=>s,oi:()=>l});const n=t(61347).apiSlice.injectEndpoints({tagTypes:["AllCoupons","SingleCoupon"],endpoints:e=>({getAllCoupons:e.query({query:()=>({url:"/coupon",method:"GET",headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),providesTags:["AllCoupons"]}),getSingleCoupon:e.query({query:e=>({url:"/coupon/".concat(e),method:"GET",headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),invalidatesTags:["AllCoupons"],providesTags:["SingleCoupon"]}),addSingleCouponById:e.mutation({query:e=>({url:"/coupon/add",method:"POST",body:e,headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),invalidatesTags:["AllCoupons"]}),updateSingleCoupon:e.mutation({query:e=>{let{id:o,data:t}=e;return{url:"/coupon/".concat(o),method:"PUT",body:t}},invalidatesTags:["AllCoupons","SingleCoupon"]}),deleteSingleCoupon:e.mutation({query:e=>({url:"/coupon/".concat(e),method:"DELETE",body:e,headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),invalidatesTags:["AllCoupons"]})})}),{useGetAllCouponsQuery:a,useDeleteSingleCouponMutation:i,useAddSingleCouponByIdMutation:d,useUpdateSingleCouponMutation:s,useGetSingleCouponQuery:l}=n},76872:(e,o,t)=>{t.r(o),t.d(o,{default:()=>x});var n=t(93946),a=t(65043),i=t(73216),d=t(42145),s=t(27166),l=t(6145),u=t(24858),r=t(94404),c=t(70579);const p=e=>{var o;let{onSubmit:t,data:i,addLoading:d,updateLoading:p,setSelectedDate:m,selectedDate:g}=e;const[x,h]=(0,a.useState)(null===i||void 0===i?void 0:i.discountType);(0,a.useEffect)((()=>{h(null===i||void 0===i?void 0:i.discountType),m(null===i||void 0===i?void 0:i.expireDate)}),[null===i||void 0===i?void 0:i.discountType]);const{register:y,handleSubmit:C}=(0,u.mN)(),b=e=>{h(e.target.value)};return(0,c.jsxs)(n.qI,{onSubmit:C(t),children:[(0,c.jsxs)(n.sK,{className:"g-3",children:[(0,c.jsx)(n.UF,{xs:12,children:(0,c.jsx)(n.OG,{type:"text",id:"CouponNameInputField",label:"Coupon Name",placeholder:"Enter Coupon Name",defaultValue:null===i||void 0===i?void 0:i.couponName,"aria-describedby":"CouponNameInputField",...y("couponName",{required:!i})})}),(0,c.jsx)(n.UF,{xs:12,children:(0,c.jsx)(n.OG,{id:"couponCodeInputField",label:"Coupon Code",placeholder:"Enter Coupon Code",defaultValue:null===i||void 0===i?void 0:i.couponCode,"aria-describedby":"couponCodeInputField",...y("couponCode",{required:!i})})}),(0,c.jsxs)(n.UF,{xs:12,children:[(0,c.jsxs)("label",{className:"mb-2",children:["Expire date:  ",i&&(0,c.jsx)("span",{className:"text-primary",children:null===(o=new Date(g))||void 0===o?void 0:o.toDateString()})]}),(0,c.jsx)(n.OG,{type:"text",id:"expireDate",placeholder:"Enter Expire Date","aria-describedby":"expireDate",defaultValue:g,onChange:e=>{m(e.target.value)},onFocus:e=>e.target.type="datetime-local",onBlur:e=>e.target.type="text"})]}),(0,c.jsxs)(n.UF,{xs:12,children:[(0,c.jsx)("label",{className:"mb-2",children:"Discount Type"}),(0,c.jsx)("br",{}),(0,c.jsx)(n.CK,{inline:!0,type:"radio",name:"discountTypeOptions",id:"discountTypePercentage",checked:"percentage"===x,value:"percentage",label:"Percentage",...y("discountType",{required:!i}),onChange:e=>b(e)}),(0,c.jsx)(n.CK,{inline:!0,type:"radio",name:"discountTypeOptions",id:"discountTypeFixedAmount",checked:"fixedAmount"===x,value:"fixedAmount",label:"Fixed Amount",...y("discountType",{required:!i}),onChange:e=>b(e)})]}),(0,c.jsx)(n.UF,{xs:12,children:(0,c.jsx)(n.OG,{type:"number",id:"discountInputField",label:"Discount",placeholder:"Enter Discount",defaultValue:null===i||void 0===i?void 0:i.discount,"aria-describedby":"discountInputField",...y("discount",{required:!i})})}),(0,c.jsx)(n.UF,{xs:12,children:(0,c.jsx)(n.OG,{type:"number",id:"totalAmountInputField",label:"Total Amount (for activate coupon)",placeholder:"Enter Total Amount",defaultValue:null===i||void 0===i?void 0:i.totalAmount,"aria-describedby":"totalAmountInputField",...y("totalAmount",{required:!i})})})]}),(0,c.jsxs)("div",{className:"text-end",children:[(0,c.jsx)(r.A,{}),(0,c.jsxs)(n.Q_,{type:"submit",color:"primary",className:"mt-3",children:[(0,c.jsx)(l.A,{icon:s.x,className:"me-2"}),d||p?"Loading..":"Save"]})]})]})};var m=t(2196),g=t(4388);const x=()=>{const{id:e}=(0,i.g)(),[o,t]=(0,a.useState)(),s=(0,i.Zp)(),{data:l,isLoading:u,isError:r}=(0,m.oi)(e,{skip:!e}),[x,{isLoading:h,isError:y,isSuccess:C}]=(0,m.Wt)(),[b,{isLoading:v,isError:j,isSuccess:S}]=(0,m.gn)(),A=t=>{const n={...t,discount:Number(t.discount),totalAmount:Number(t.totalAmount),expireDate:o};e?b({id:e,data:n}):x(n)};let T=null;return u&&(T=(0,c.jsx)("p",{children:"Loading..."})),!u&&r&&(T=(0,c.jsx)("p",{className:"text-danger",children:"There is something wrong!"})),u||r||(T=(0,c.jsx)(p,{selectedDate:o,setSelectedDate:t,addLoading:h,updateLoading:v,onSubmit:A,data:l})),(0,a.useEffect)((()=>{d.oR.dismiss(),y&&d.oR.error("Adding Failed",{id:"aFailed"}),j&&d.oR.error("Update Failed",{id:"uFailed"})}),[j,y]),(0,a.useEffect)((()=>{C&&s(-1),S&&s(-1)}),[S,s,C]),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(n.sK,{children:(0,c.jsx)(n.UF,{xs:12,children:(0,c.jsxs)(n.E$,{className:"mb-4",children:[(0,c.jsx)(g.A,{title:e?"Update coupon":"Add Coupon"}),(0,c.jsx)(n.W6,{children:T})]})})})})}}}]);
//# sourceMappingURL=6872.256684ab.chunk.js.map