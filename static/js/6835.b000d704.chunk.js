"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[6835],{9704:(e,r,l)=>{l.d(r,{AH:()=>c,ES:()=>p,Iv:()=>x,Nb:()=>j,Nw:()=>v,R6:()=>d,RZ:()=>g,SQ:()=>i,__:()=>o,bi:()=>m,eU:()=>y,gv:()=>s,jY:()=>n,mi:()=>h,pb:()=>a,x_:()=>u});const t=l(60470).apiSlice.injectEndpoints({tagTypes:["AllOrder","SingleOrder","RecentOrder","AllFilterOrder"],endpoints:e=>({getAllOrders:e.query({query:e=>({url:"/order".concat(e),method:"GET"}),providesTags:["AllOrder"]}),getAllOrdersByFilter:e.query({query:e=>({url:"/order/filterOrder?".concat(e),method:"GET"}),providesTags:["AllFilterOrder"]}),getRecentOrder:e.query({query:()=>({url:"/order/recentOrder",method:"GET"}),providesTags:["RecentOrder"]}),getTotalSaleByYear:e.query({query:()=>({url:"/order/totalSaleByYear",method:"GET"})}),getTotalOrdersByYear:e.query({query:()=>({url:"/order/totalOrdersByYear",method:"GET"})}),getTotalSaleByMonth:e.query({query:()=>({url:"/order/totalSaleByMonth",method:"GET"})}),getTotalOrderByMonth:e.query({query:()=>({url:"/order/totalOrdersByMonth",method:"GET"})}),getTotalSaleByDay:e.query({query:()=>({url:"/order/totalSaleByDay",method:"GET"})}),getTotalOrderByDay:e.query({query:()=>({url:"/order/totalOrdersByDay",method:"GET"})}),getTotalSales:e.query({query:()=>({url:"/order/totalSales",method:"GET"})}),getTotalSalesByDate:e.mutation({query:e=>{let{data:r}=e;return{url:"/order/totalSales/byDate",method:"POST",body:r}}}),getTotalOrders:e.query({query:()=>({url:"/order/totalOrders",method:"GET"})}),getSingleOrderById:e.query({query:e=>({url:"/order/".concat(e),method:"GET"}),providesTags:["SingleOrder"]}),updateSingleOrderById:e.mutation({query:e=>{let{id:r,data:l}=e;return{url:"/order/".concat(r),method:"PUT",body:l}},invalidatesTags:["AllOrder","SingleOrder","RecentOrder","AllFilterOrder","Products"]}),deleteOrderById:e.mutation({query:e=>({url:"/order/".concat(e),method:"DELETE",body:e}),invalidatesTags:["AllOrder","AllFilterOrder"]}),updatePaymentOrder:e.mutation({query:e=>{let{orderId:r,productId:l,data:t}=e;return{url:"/order/".concat(r,"/products/").concat(l,"/transaction"),method:"PUT",body:t}},invalidatesTags:["AllOrder","AllFilterOrder"]})})}),{useGetAllOrdersQuery:s,useGetAllOrdersByFilterQuery:d,useGetRecentOrderQuery:a,useDeleteOrderByIdMutation:i,useUpdateSingleOrderByIdMutation:o,useGetSingleOrderByIdQuery:n,useGetTotalSaleByYearQuery:c,useGetTotalSaleByMonthQuery:u,useGetTotalOrderByMonthQuery:h,useGetTotalSaleByDayQuery:x,useGetTotalOrderByDayQuery:p,useGetTotalSalesQuery:m,useGetTotalSalesByDateMutation:y,useGetTotalOrdersQuery:j,useGetTotalOrdersByYearQuery:g,useUpdatePaymentOrderMutation:v}=t},57849:(e,r,l)=>{l.d(r,{Z:()=>n});var t=l(17540),s=l(24846),d=l(78983),a=l(61134),i=l(57689),o=(l(94440),l(80184));const n=e=>{let{onSubmit:r,tableData:l,isNavigate:n}=e;const c=(0,i.s0)(),u=[...l],{register:h,handleSubmit:x,reset:p}=(0,a.cI)();return(0,o.jsx)("div",{className:"mx-3 px-3 mt-3 pb-3 border rounded",style:{backgroundColor:"#f5f5f5"},children:(0,o.jsxs)(d.lx,{onSubmit:x(r),children:[(0,o.jsx)(d.rb,{children:u.map(((e,r)=>(0,o.jsx)(d.b7,{xs:4,className:"mt-3",children:(0,o.jsx)(d.jO,{type:e.type,id:"exampleFormControlInput1",label:e.name,placeholder:e.name,disabled:e.disabled,"aria-describedby":"exampleFormControlInputHelpInline",...h(e.register)})},r)))}),(0,o.jsxs)("div",{className:"d-flex align-items-center justify-content-end mt-3 ",children:[(0,o.jsx)(d.u5,{className:"me-2 text-white",color:"info",onClick:()=>(n&&c("."),void p()),children:"Clear"}),(0,o.jsxs)(d.u5,{color:"info",className:" text-white me-2",type:"submit",children:[(0,o.jsx)(s.Z,{icon:t.j,style:{width:"12px",height:"12px"}})," Filter"]})]})]})})}},89398:(e,r,l)=>{l.d(r,{Z:()=>a});var t=l(78983),s=l(39126),d=l(80184);const a=e=>{let{handleClick:r}=e;return(0,d.jsx)(t.If,{content:"View",children:(0,d.jsx)(t.u5,{onClick:r,className:"mb-1  ms-2",style:{height:"30px",width:"32px",position:"relative"},color:"info",variant:"outline",children:(0,d.jsx)(s.rCC,{style:{position:"absolute",top:"25%",left:"25%"}})})})}},71427:(e,r,l)=>{l.d(r,{Z:()=>c});var t=l(78983),s=l(72791),d=l(9704),a=(l(30026),l(43034)),i=l(25853),o=l(80184);const n=e=>{var r;let{filterData:l}=e,t=e=>null===e||void 0===e?void 0:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");const{totalOrders:s,totalSales:d,totalShipping:a}=(null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r[0])||{},{name:i,email:n,phone:c}=(null===l||void 0===l?void 0:l.user)||{};return(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"d-flex justify-content-between my-4",children:[(0,o.jsxs)("div",{className:"salesCard userInfo",children:[(0,o.jsxs)("p",{children:["Name: ",i]}),(0,o.jsxs)("p",{children:["Email: ",n]}),(0,o.jsxs)("p",{children:["Phone: ",c]})]}),(0,o.jsxs)("div",{className:"salesCard sales",children:[(0,o.jsx)("p",{className:"fs-5 fw-bold",children:t(d)||0}),(0,o.jsx)("p",{children:"Total sales"})]}),(0,o.jsxs)("div",{className:"salesCard shipping",children:[(0,o.jsx)("p",{className:"fs-5 fw-bold",children:t(a)||0}),(0,o.jsx)("p",{children:"Total shipping"})]}),(0,o.jsxs)("div",{className:"salesCard orders",children:[(0,o.jsx)("p",{className:"fs-5 fw-bold",children:t(s)||0}),(0,o.jsx)("p",{children:"Total orders"})]})]})})},c=e=>{var r,l;let{showModal:c,setShowModal:u,query:h,showUserInfo:x}=e;const[p,m]=(0,s.useState)(!0),{data:y,isLoading:j,isError:g}=(0,d.R6)(h,{skip:p}),[v,{isLoading:N,isSuccess:b,isError:S}]=(0,d.SQ)();(0,s.useEffect)((()=>{(null===h||void 0===h?void 0:h.length)>2&&m(!1)}),[h]);const f=e=>{v(e)};let O=null;var T;(j&&(O=(0,o.jsx)(a.Z,{})),!j&&g&&(O=(0,o.jsx)(t.NN,{className:"text-center py-4 fw-bold text-warning",colSpan:"100%",children:"There was an error, try again."})),j||g||0!==(null===y||void 0===y||null===(r=y.data)||void 0===r?void 0:r.length)||(O=(0,o.jsx)(t.NN,{className:"text-center py-4 fw-bold text-warning",colSpan:"100%",children:"No data found"})),!j&&!g&&(null===y||void 0===y||null===(l=y.data)||void 0===l?void 0:l.length)>0)&&(O=null===y||void 0===y||null===(T=y.data)||void 0===T?void 0:T.map(((e,r)=>(0,o.jsx)(t.NR,{children:(0,o.jsx)(i.Z,{handleDeleteOrder:f,deleteLoading:N,index:r,order:e})},null===e||void 0===e?void 0:e._id))));return(0,o.jsxs)(t.Tk,{visible:c,onClose:()=>{u(!1)},className:"orderModal",style:{minHeight:"50vh"},children:[(0,o.jsx)(t.p0,{closeButton:!0,className:"fw-bold fs-5",children:"Your searching results"}),(0,o.jsx)(t.sD,{children:(0,o.jsxs)(o.Fragment,{children:[x&&(0,o.jsx)(n,{filterData:null===y||void 0===y?void 0:y.orderInfo}),(0,o.jsxs)(t.Sx,{align:"middle",className:"mb-0 border",bordered:!0,hover:!0,responsive:!0,children:[(0,o.jsx)(t.V,{color:"light",children:(0,o.jsxs)(t.T6,{className:"text-start",children:[(0,o.jsx)(t.is,{scope:"col",style:{width:"60px"},children:"Sl. No."}),(0,o.jsx)(t.is,{scope:"col",style:{width:"200px"},children:"Customer"}),(0,o.jsx)(t.is,{scope:"col",children:"Order Id"}),(0,o.jsx)(t.is,{scope:"col",children:"Phone"}),(0,o.jsx)(t.is,{scope:"col",children:"Total"}),(0,o.jsx)(t.is,{scope:"col",children:"Payment Method"}),(0,o.jsx)(t.is,{scope:"col",children:"Order Date"}),(0,o.jsx)(t.is,{scope:"col",children:"Modify Date"}),(0,o.jsx)(t.is,{scope:"col",children:"Order Status"}),(0,o.jsx)(t.is,{scope:"col",style:{width:"150px",minWidth:"150px"},children:"Actions"})]})}),O]})]})}),(0,o.jsx)(t.Ym,{})]})}},30026:(e,r,l)=>{l.d(r,{Z:()=>o});var t=l(72791),s=l(8116),d=l(57689),a=l(13691),i=l(80184);const o=e=>{let{totalPageNumber:r,searchUrl:l}=e;const[o,n]=(0,t.useState)(1),c=(0,d.s0)(),u=e=>{n(e),c((0,a.G)(l||"?","page",e.toString()))};let h=r?Array.from({length:r},((e,r)=>r+1)):[],x=[];for(let t=1;t<=h.length;t++)x.push((0,i.jsx)(s.Z.Item,{active:t===o,onClick:()=>u(t),children:t},t));return(0,i.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,i.jsxs)(s.Z,{size:"sm",children:[o>1&&(0,i.jsx)(s.Z.Prev,{onClick:()=>u(o-1)}),x,o<r&&(0,i.jsx)(s.Z.Next,{onClick:()=>u(o+1)}),r>1&&(0,i.jsx)(s.Z.Last,{onClick:()=>u(r)})]})})}},13691:(e,r,l)=>{l.d(r,{G:()=>t});const t=(e,r,l)=>{const t=e.split("&");let s=!1;for(let d=0;d<t.length;d++){const e=t[d].split("=");if(e[0]===r){e[1]=l,t[d]=e.join("="),s=!0;break}}s||t.push("".concat(r,"=").concat(l));return[...new Set(t)].join("&")}},46835:(e,r,l)=>{l.r(r),l.d(r,{default:()=>v});var t=l(78983),s=l(61734),d=l(60748),a=l(9704),i=l(57849),o=l(21527),n=l(57689),c=l(13691),u=l(43034),h=l(72791),x=l(9085),p=l(30026),m=l(25853),y=l(80184);const j=e=>{let{c:r,allOrders:l,getLoading:s,pages:d}=e;const i=(0,n.TH)(),[o,{isLoading:c,isSuccess:j,getError:g,isError:v}]=(0,a.SQ)(),N=e=>{o(e)};(0,h.useEffect)((()=>{j&&x.Am.success("Delete successfully"),v&&x.Am.error("Delete Failed")}),[j,v]);let b=null;var S;(s&&(b=(0,y.jsx)(u.Z,{})),!s&&g&&(b=(0,y.jsx)(t.NN,{className:"text-center py-4 fw-bold text-warning",colSpan:"100%",children:"There was an error, try again."})),s||g||0!==l.length||(b=(0,y.jsx)(t.NN,{className:"text-center py-4 fw-bold text-warning",colSpan:"100%",children:"No data found"})),!s&&!g&&l.length>0)&&(b=null===l||void 0===l||null===(S=l.filter((e=>{var l;return(null===e||void 0===e||null===(l=e.status)||void 0===l?void 0:l.toLowerCase())===(null===r||void 0===r?void 0:r.toLowerCase())})))||void 0===S?void 0:S.map(((e,r)=>(0,y.jsx)(t.NR,{children:(0,y.jsx)(m.Z,{handleDeleteOrder:N,deleteLoading:c,index:r,order:e})},null===e||void 0===e?void 0:e._id))));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(t.Sx,{align:"middle",className:"mb-0 border",bordered:!0,hover:!0,responsive:!0,children:[(0,y.jsx)(t.V,{color:"light",children:(0,y.jsxs)(t.T6,{className:"text-start",children:[(0,y.jsx)(t.is,{scope:"col",style:{width:"60px"},children:"Sl. No."}),(0,y.jsx)(t.is,{scope:"col",style:{width:"200px"},children:"Customer"}),(0,y.jsx)(t.is,{scope:"col",children:"Order Id"}),(0,y.jsx)(t.is,{scope:"col",children:"Shipping Phone"}),(0,y.jsx)(t.is,{scope:"col",children:"Total"}),(0,y.jsx)(t.is,{scope:"col",children:"Payment Method"}),(0,y.jsx)(t.is,{scope:"col",children:"Order Date"}),(0,y.jsx)(t.is,{scope:"col",children:"Modify Date"}),(0,y.jsx)(t.is,{scope:"col",children:"Order Status"}),(0,y.jsx)(t.is,{scope:"col",style:{width:"150px",minWidth:"150px"},children:"Actions"})]})}),b]}),(0,y.jsx)(p.Z,{searchUrl:i.search,totalPageNumber:d})]})};var g=l(71427);const v=()=>{const e=(0,n.TH)(),{data:r,isLoading:l,isFetching:x,isError:p}=(0,a.gv)(null===e||void 0===e?void 0:e.search),m=(0,n.s0)(),[v,N]=(0,h.useState)(!1),[b,S]=(0,h.useState)(""),f=["Pending","Processing","shipped","Delivered","Returned","Cancelled","Expired"];let O=null,T=null;l&&(T=(0,y.jsx)(u.Z,{})),!l&&p&&(T=(0,y.jsx)("p",{className:"text-danger text-center",children:"There was an error"})),l||p||(O=null===f||void 0===f?void 0:f.map(((e,l)=>(0,y.jsx)(s.Z,{eventKey:e,title:e,children:(0,y.jsx)(j,{getLoading:x,getError:p,allOrders:null===r||void 0===r?void 0:r.data,pages:null===r||void 0===r?void 0:r.totalPageNumber,c:e})},l))));return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(t.rb,{children:[(0,y.jsx)(g.Z,{query:b,showModal:v,setShowModal:N}),(0,y.jsx)(t.b7,{xs:12,children:(0,y.jsxs)(t.xH,{className:"mb-4",children:[(0,y.jsx)(o.Z,{title:"All Orders"}),(0,y.jsx)(i.Z,{onSubmit:e=>{let r="";e.name&&(r+="name=".concat(e.name)),e.orderId&&(r+="&orderId=".concat(e.orderId)),e.shippingPhone&&(r+="&shippingPhone=".concat(e.shippingPhone)),e.method&&(r+="&method=".concat(e.method)),e.price&&(r+="&price=".concat(e.price)),e.dateAdded&&(r+="&date=".concat(e.dateAdded)),S(r),N(!0)},tableData:[{name:"Order Id",register:"orderId",type:"text"},{name:"Phone Number",register:"shippingPhone",type:"text"},{name:"Customer Name",register:"name",type:"text"},{name:"Price",register:"price",type:"text"},{name:"Payment Method",register:"method",type:"text"},{name:"Date Added",register:"dateAdded",type:"date"}],isNavigate:!1}),(0,y.jsxs)(t.sl,{children:[(0,y.jsx)("p",{className:"text-medium-emphasis small",children:"Here is the list of all orders."}),T||(0,y.jsx)(d.Z,{defaultActiveKey:null===f||void 0===f?void 0:f[0],onSelect:e=>{return r=e,(0,c.G)("?","page",1),void m("?page=1&status=".concat(r));var r},id:"uncontrolled-tab-example",className:"mb-3",children:O})]})]})})]})})}},25853:(e,r,l)=>{l.d(r,{Z:()=>h});var t=l(78983),s=l(72791),d=l(11087),a=l(9704),i=l(97605),o=l(51118),n=l(89398),c=l(30160),u=l(80184);const h=e=>{let{index:r,order:l,handleDeleteOrder:h,deleteLoading:x}=e;const[p,m]=(0,s.useState)(!1),{totalAmount:y,createdAt:j,updatedAt:g,paymentType:v,status:N,userName:b,userPhone:S,orderId:f,report:O}=l||{},[T,w]=(0,s.useState)(N),[E,{isLoading:P,updateError:D}]=(0,a.__)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.Z,{deleteThis:h,showModal:p,setShowModal:m,id:null===l||void 0===l?void 0:l._id,deleteLoading:x}),(0,u.jsxs)(t.T6,{children:[(0,u.jsx)(t.is,{scope:"row",children:r+1}),(0,u.jsx)(t.NN,{children:b}),(0,u.jsx)(t.NN,{children:f}),(0,u.jsx)(t.NN,{children:S}),(0,u.jsx)(t.NN,{children:y}),(0,u.jsxs)(t.NN,{children:[v," ",O&&(0,u.jsxs)("span",{className:"text-danger text-uppercase",children:["REQ: ",null===O||void 0===O?void 0:O.requestedFor]})]}),(0,u.jsx)(t.NN,{children:new Date(j).toLocaleDateString()}),(0,u.jsx)(t.NN,{children:new Date(g).toLocaleDateString()}),(0,u.jsxs)(t.NN,{children:[P&&(0,u.jsx)("small",{children:"Loading.."}),D&&(0,u.jsx)("small",{className:"text-danger",children:"Error occured"}),(0,u.jsx)(t.LX,{style:{width:"150px"},"aria-label":"Product Select Selection Field",options:[{value:"pending",label:"Pending"},{value:"processing",label:"Processing"},{value:"shipped",label:"shipped"},{value:"cancelled",label:"Cancelled"},{value:"returned",label:"Returned"},{value:"delivered",label:"Delivered"},{value:"expired",label:"Expired"}],value:T,disabled:P,onChange:e=>{((e,r)=>{const l=e.target.value;w(l),E({id:r,data:{status:l}})})(e,null===l||void 0===l?void 0:l._id)}})]}),(0,u.jsx)(t.NN,{children:(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)(d.rU,{to:"/order/details/".concat(null===l||void 0===l?void 0:l._id),children:(0,u.jsx)(n.Z,{})}),(0,u.jsx)(d.rU,{to:"/order/details/".concat(null===l||void 0===l?void 0:l._id),children:(0,u.jsx)(o.Z,{})}),(0,u.jsx)(i.Z,{setShowModal:m})]})})]})]})}},8116:(e,r,l)=>{l.d(r,{Z:()=>g});var t=l(41418),s=l.n(t),d=l(72791),a=l(10162),i=l(11784),o=l(80184);const n=d.forwardRef(((e,r)=>{let{active:l=!1,disabled:t=!1,className:d,style:a,activeLabel:n="(current)",children:c,linkStyle:u,linkClassName:h,as:x=i.Z,...p}=e;const m=l||t?"span":x;return(0,o.jsx)("li",{ref:r,style:a,className:s()(d,"page-item",{active:l,disabled:t}),children:(0,o.jsxs)(m,{className:s()("page-link",h),style:u,...p,children:[c,l&&n&&(0,o.jsx)("span",{className:"visually-hidden",children:n})]})})}));n.displayName="PageItem";const c=n;function u(e,r){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;const t=d.forwardRef(((e,t)=>{let{children:s,...d}=e;return(0,o.jsxs)(n,{...d,ref:t,children:[(0,o.jsx)("span",{"aria-hidden":"true",children:s||r}),(0,o.jsx)("span",{className:"visually-hidden",children:l})]})}));return t.displayName=e,t}const h=u("First","\xab"),x=u("Prev","\u2039","Previous"),p=u("Ellipsis","\u2026","More"),m=u("Next","\u203a"),y=u("Last","\xbb"),j=d.forwardRef(((e,r)=>{let{bsPrefix:l,className:t,size:d,...i}=e;const n=(0,a.vE)(l,"pagination");return(0,o.jsx)("ul",{ref:r,...i,className:s()(t,n,d&&"".concat(n,"-").concat(d))})}));j.displayName="Pagination";const g=Object.assign(j,{First:h,Prev:x,Ellipsis:p,Item:c,Next:m,Last:y})}}]);
//# sourceMappingURL=6835.b000d704.chunk.js.map