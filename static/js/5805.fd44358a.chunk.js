"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[5805],{85612:(e,r,l)=>{l.d(r,{BI:()=>p,CT:()=>s,Fp:()=>d,GH:()=>m,OJ:()=>x,P6:()=>c,P8:()=>a,Qb:()=>i,RU:()=>h,YA:()=>u,e$:()=>o,iO:()=>n,jp:()=>j,mg:()=>g,v1:()=>v,wx:()=>y});const t=l(61347).apiSlice.injectEndpoints({tagTypes:["AllOrder","SingleOrder","RecentOrder","AllFilterOrder"],endpoints:e=>({getAllOrders:e.query({query:e=>({url:"/order".concat(e),method:"GET"}),providesTags:["AllOrder"]}),getAllOrdersByFilter:e.query({query:e=>({url:"/order/filterOrder?".concat(e),method:"GET"}),providesTags:["AllFilterOrder"]}),getRecentOrder:e.query({query:()=>({url:"/order/recentOrder",method:"GET"}),providesTags:["RecentOrder"]}),getTotalSaleByYear:e.query({query:()=>({url:"/order/totalSaleByYear",method:"GET"})}),getTotalOrdersByYear:e.query({query:()=>({url:"/order/totalOrdersByYear",method:"GET"})}),getTotalSaleByMonth:e.query({query:()=>({url:"/order/totalSaleByMonth",method:"GET"})}),getTotalOrderByMonth:e.query({query:()=>({url:"/order/totalOrdersByMonth",method:"GET"})}),getTotalSaleByDay:e.query({query:()=>({url:"/order/totalSaleByDay",method:"GET"})}),getTotalOrderByDay:e.query({query:()=>({url:"/order/totalOrdersByDay",method:"GET"})}),getTotalSales:e.query({query:()=>({url:"/order/totalSales",method:"GET"})}),getTotalSalesByDate:e.mutation({query:e=>{let{data:r}=e;return{url:"/order/totalSales/byDate",method:"POST",body:r}}}),getTotalOrders:e.query({query:()=>({url:"/order/totalOrders",method:"GET"})}),getSingleOrderById:e.query({query:e=>({url:"/order/".concat(e),method:"GET"}),providesTags:["SingleOrder"]}),updateSingleOrderById:e.mutation({query:e=>{let{id:r,data:l}=e;return{url:"/order/".concat(r),method:"PUT",body:l}},invalidatesTags:["AllOrder","SingleOrder","RecentOrder","AllFilterOrder","Products"]}),deleteOrderById:e.mutation({query:e=>({url:"/order/".concat(e),method:"DELETE",body:e}),invalidatesTags:["AllOrder","AllFilterOrder"]}),updatePaymentOrder:e.mutation({query:e=>{let{orderId:r,productId:l,data:t}=e;return{url:"/order/".concat(r,"/products/").concat(l,"/transaction"),method:"PUT",body:t}},invalidatesTags:["AllOrder","AllFilterOrder"]})})}),{useGetAllOrdersQuery:s,useGetAllOrdersByFilterQuery:d,useGetRecentOrderQuery:a,useDeleteOrderByIdMutation:o,useUpdateSingleOrderByIdMutation:n,useGetSingleOrderByIdQuery:i,useGetTotalSaleByYearQuery:c,useGetTotalSaleByMonthQuery:u,useGetTotalOrderByMonthQuery:h,useGetTotalSaleByDayQuery:x,useGetTotalOrderByDayQuery:p,useGetTotalSalesQuery:m,useGetTotalSalesByDateMutation:y,useGetTotalOrdersQuery:j,useGetTotalOrdersByYearQuery:v,useUpdatePaymentOrderMutation:g}=t},28403:(e,r,l)=>{l.d(r,{A:()=>i});var t=l(19826),s=l(6145),d=l(93946),a=l(24858),o=l(73216),n=(l(75768),l(70579));const i=e=>{let{onSubmit:r,tableData:l,isNavigate:i}=e;const c=(0,o.Zp)(),u=[...l],{register:h,handleSubmit:x,reset:p}=(0,a.mN)();return(0,n.jsx)("div",{className:"mx-3 px-3 mt-3 pb-3 border rounded",style:{backgroundColor:"#f5f5f5"},children:(0,n.jsxs)(d.qI,{onSubmit:x(r),children:[(0,n.jsx)(d.sK,{children:u.map(((e,r)=>(0,n.jsx)(d.UF,{xs:4,className:"mt-3",children:(0,n.jsx)(d.OG,{type:e.type,id:"exampleFormControlInput1",label:e.name,placeholder:e.name,disabled:e.disabled,"aria-describedby":"exampleFormControlInputHelpInline",...h(e.register)})},r)))}),(0,n.jsxs)("div",{className:"d-flex align-items-center justify-content-end mt-3 ",children:[(0,n.jsx)(d.Q_,{className:"me-2 text-white",color:"info",onClick:()=>(i&&c("."),void p()),children:"Clear"}),(0,n.jsxs)(d.Q_,{color:"info",className:" text-white me-2",type:"submit",children:[(0,n.jsx)(s.A,{icon:t.B,style:{width:"12px",height:"12px"}})," Filter"]})]})]})})}},48907:(e,r,l)=>{l.d(r,{A:()=>o});var t=l(1118),s=l(6145),d=l(93946),a=l(70579);const o=e=>{let{setShowModal:r}=e;return(0,a.jsx)(d.jl,{content:"Delete",children:(0,a.jsx)(d.Q_,{color:"danger",variant:"outline",style:{height:"30px",width:"32px",position:"relative"},className:"ms-2 mb-1",onClick:()=>r(!0),children:(0,a.jsx)(s.A,{icon:t.Z,style:{position:"absolute",top:"25%",left:"25%"}})})})}},71643:(e,r,l)=>{l.d(r,{A:()=>a});var t=l(93946),s=l(2127),d=l(70579);const a=e=>{let{handleClick:r}=e;return(0,d.jsx)(t.jl,{content:"View",children:(0,d.jsx)(t.Q_,{onClick:r,className:"mb-1  ms-2",style:{height:"30px",width:"32px",position:"relative"},color:"info",variant:"outline",children:(0,d.jsx)(s.JPe,{style:{position:"absolute",top:"25%",left:"25%"}})})})}},65853:(e,r,l)=>{l.d(r,{A:()=>c});var t=l(93946),s=l(65043),d=l(85612),a=(l(93570),l(61297)),o=l(29189),n=l(70579);const i=e=>{var r;let{filterData:l}=e,t=e=>null===e||void 0===e?void 0:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");const{totalOrders:s,totalSales:d,totalShipping:a}=(null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r[0])||{},{name:o,email:i,phone:c}=(null===l||void 0===l?void 0:l.user)||{};return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"d-flex justify-content-between my-4",children:[(0,n.jsxs)("div",{className:"salesCard userInfo",children:[(0,n.jsxs)("p",{children:["Name: ",o]}),(0,n.jsxs)("p",{children:["Email: ",i]}),(0,n.jsxs)("p",{children:["Phone: ",c]})]}),(0,n.jsxs)("div",{className:"salesCard sales",children:[(0,n.jsx)("p",{className:"fs-5 fw-bold",children:t(d)||0}),(0,n.jsx)("p",{children:"Total sales"})]}),(0,n.jsxs)("div",{className:"salesCard shipping",children:[(0,n.jsx)("p",{className:"fs-5 fw-bold",children:t(a)||0}),(0,n.jsx)("p",{children:"Total shipping"})]}),(0,n.jsxs)("div",{className:"salesCard orders",children:[(0,n.jsx)("p",{className:"fs-5 fw-bold",children:t(s)||0}),(0,n.jsx)("p",{children:"Total orders"})]})]})})},c=e=>{var r,l;let{showModal:c,setShowModal:u,query:h,showUserInfo:x}=e;const[p,m]=(0,s.useState)(!0),{data:y,isLoading:j,isError:v}=(0,d.Fp)(h,{skip:p}),[g,{isLoading:b,isSuccess:O,isError:S}]=(0,d.e$)();(0,s.useEffect)((()=>{(null===h||void 0===h?void 0:h.length)>2&&m(!1)}),[h]);const f=e=>{g(e)};let N=null;var A;(j&&(N=(0,n.jsx)(a.A,{})),!j&&v&&(N=(0,n.jsx)(t.cC,{className:"text-center py-4 fw-bold text-warning",colSpan:"100%",children:"There was an error, try again."})),j||v||0!==(null===y||void 0===y||null===(r=y.data)||void 0===r?void 0:r.length)||(N=(0,n.jsx)(t.cC,{className:"text-center py-4 fw-bold text-warning",colSpan:"100%",children:"No data found"})),!j&&!v&&(null===y||void 0===y||null===(l=y.data)||void 0===l?void 0:l.length)>0)&&(N=null===y||void 0===y||null===(A=y.data)||void 0===A?void 0:A.map(((e,r)=>(0,n.jsx)(t.jS,{children:(0,n.jsx)(o.A,{handleDeleteOrder:f,deleteLoading:b,index:r,order:e})},null===e||void 0===e?void 0:e._id))));return(0,n.jsxs)(t.zS,{visible:c,onClose:()=>{u(!1)},className:"orderModal",style:{minHeight:"50vh"},children:[(0,n.jsx)(t.E4,{closeButton:!0,className:"fw-bold fs-5",children:"Your searching results"}),(0,n.jsx)(t.Tc,{children:(0,n.jsxs)(n.Fragment,{children:[x&&(0,n.jsx)(i,{filterData:null===y||void 0===y?void 0:y.orderInfo}),(0,n.jsxs)(t._v,{align:"middle",className:"mb-0 border",bordered:!0,hover:!0,responsive:!0,children:[(0,n.jsx)(t.wV,{color:"light",children:(0,n.jsxs)(t.YI,{className:"text-start",children:[(0,n.jsx)(t.$s,{scope:"col",style:{width:"60px"},children:"Sl. No."}),(0,n.jsx)(t.$s,{scope:"col",style:{width:"200px"},children:"Customer"}),(0,n.jsx)(t.$s,{scope:"col",children:"Order Id"}),(0,n.jsx)(t.$s,{scope:"col",children:"Phone"}),(0,n.jsx)(t.$s,{scope:"col",children:"Total"}),(0,n.jsx)(t.$s,{scope:"col",children:"Payment Method"}),(0,n.jsx)(t.$s,{scope:"col",children:"Order Date"}),(0,n.jsx)(t.$s,{scope:"col",children:"Modify Date"}),(0,n.jsx)(t.$s,{scope:"col",children:"Order Status"}),(0,n.jsx)(t.$s,{scope:"col",style:{width:"150px",minWidth:"150px"},children:"Actions"})]})}),N]})]})}),(0,n.jsx)(t.If,{})]})}},93570:(e,r,l)=>{l.d(r,{A:()=>n});var t=l(65043),s=l(27491),d=l(73216),a=l(10996),o=l(70579);const n=e=>{let{totalPageNumber:r,searchUrl:l}=e;const[n,i]=(0,t.useState)(1),c=(0,d.Zp)(),u=e=>{i(e),c((0,a.u)(l||"?","page",e.toString()))};let h=r?Array.from({length:r},((e,r)=>r+1)):[],x=[];for(let t=1;t<=h.length;t++)x.push((0,o.jsx)(s.A.Item,{active:t===n,onClick:()=>u(t),children:t},t));return(0,o.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,o.jsxs)(s.A,{size:"sm",children:[n>1&&(0,o.jsx)(s.A.Prev,{onClick:()=>u(n-1)}),x,n<r&&(0,o.jsx)(s.A.Next,{onClick:()=>u(n+1)}),r>1&&(0,o.jsx)(s.A.Last,{onClick:()=>u(r)})]})})}},10996:(e,r,l)=>{l.d(r,{u:()=>t});const t=(e,r,l)=>{const t=e.split("&");let s=!1;for(let d=0;d<t.length;d++){const e=t[d].split("=");if(e[0]===r){e[1]=l,t[d]=e.join("="),s=!0;break}}s||t.push("".concat(r,"=").concat(l));return[...new Set(t)].join("&")}},5805:(e,r,l)=>{l.r(r),l.d(r,{default:()=>g});var t=l(93946),s=l(5328),d=l(68069),a=l(85612),o=l(28403),n=l(88782),i=l(73216),c=l(10996),u=l(61297),h=l(65043),x=l(42145),p=l(93570),m=l(29189),y=l(70579);const j=e=>{let{c:r,allOrders:l,getLoading:s,pages:d}=e;const o=(0,i.zy)(),[n,{isLoading:c,isSuccess:j,getError:v,isError:g}]=(0,a.e$)(),b=e=>{n(e)};(0,h.useEffect)((()=>{j&&x.oR.success("Delete successfully"),g&&x.oR.error("Delete Failed")}),[j,g]);let O=null;var S;(s&&(O=(0,y.jsx)(u.A,{})),!s&&v&&(O=(0,y.jsx)(t.cC,{className:"text-center py-4 fw-bold text-warning",colSpan:"100%",children:"There was an error, try again."})),s||v||0!==l.length||(O=(0,y.jsx)(t.cC,{className:"text-center py-4 fw-bold text-warning",colSpan:"100%",children:"No data found"})),!s&&!v&&l.length>0)&&(O=null===l||void 0===l||null===(S=l.filter((e=>{var l;return(null===e||void 0===e||null===(l=e.status)||void 0===l?void 0:l.toLowerCase())===(null===r||void 0===r?void 0:r.toLowerCase())})))||void 0===S?void 0:S.map(((e,r)=>(0,y.jsx)(t.jS,{children:(0,y.jsx)(m.A,{handleDeleteOrder:b,deleteLoading:c,index:r,order:e})},null===e||void 0===e?void 0:e._id))));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(t._v,{align:"middle",className:"mb-0 border",bordered:!0,hover:!0,responsive:!0,children:[(0,y.jsx)(t.wV,{color:"light",children:(0,y.jsxs)(t.YI,{className:"text-start",children:[(0,y.jsx)(t.$s,{scope:"col",style:{width:"60px"},children:"Sl. No."}),(0,y.jsx)(t.$s,{scope:"col",style:{width:"200px"},children:"Customer"}),(0,y.jsx)(t.$s,{scope:"col",children:"Order Id"}),(0,y.jsx)(t.$s,{scope:"col",children:"Shipping Phone"}),(0,y.jsx)(t.$s,{scope:"col",children:"Total"}),(0,y.jsx)(t.$s,{scope:"col",children:"Payment Method"}),(0,y.jsx)(t.$s,{scope:"col",children:"Order Date"}),(0,y.jsx)(t.$s,{scope:"col",children:"Modify Date"}),(0,y.jsx)(t.$s,{scope:"col",children:"Order Status"}),(0,y.jsx)(t.$s,{scope:"col",style:{width:"150px",minWidth:"150px"},children:"Actions"})]})}),O]}),(0,y.jsx)(p.A,{searchUrl:o.search,totalPageNumber:d})]})};var v=l(65853);const g=()=>{const e=(0,i.zy)(),{data:r,isLoading:l,isFetching:x,isError:p}=(0,a.CT)(null===e||void 0===e?void 0:e.search),m=(0,i.Zp)(),[g,b]=(0,h.useState)(!1),[O,S]=(0,h.useState)(""),f=["Pending","Processing","shipped","Delivered","Returned","Cancelled","Expired"];let N=null,A=null;l&&(A=(0,y.jsx)(u.A,{})),!l&&p&&(A=(0,y.jsx)("p",{className:"text-danger text-center",children:"There was an error"})),l||p||(N=null===f||void 0===f?void 0:f.map(((e,l)=>(0,y.jsx)(s.A,{eventKey:e,title:e,children:(0,y.jsx)(j,{getLoading:x,getError:p,allOrders:null===r||void 0===r?void 0:r.data,pages:null===r||void 0===r?void 0:r.totalPageNumber,c:e})},l))));return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(t.sK,{children:[(0,y.jsx)(v.A,{query:O,showModal:g,setShowModal:b}),(0,y.jsx)(t.UF,{xs:12,children:(0,y.jsxs)(t.E$,{className:"mb-4",children:[(0,y.jsx)(n.A,{title:"All Orders"}),(0,y.jsx)(o.A,{onSubmit:e=>{let r="";e.name&&(r+="name=".concat(e.name)),e.orderId&&(r+="&orderId=".concat(e.orderId)),e.shippingPhone&&(r+="&shippingPhone=".concat(e.shippingPhone)),e.method&&(r+="&method=".concat(e.method)),e.price&&(r+="&price=".concat(e.price)),e.dateAdded&&(r+="&date=".concat(e.dateAdded)),S(r),b(!0)},tableData:[{name:"Order Id",register:"orderId",type:"text"},{name:"Phone Number",register:"shippingPhone",type:"text"},{name:"Customer Name",register:"name",type:"text"},{name:"Price",register:"price",type:"text"},{name:"Payment Method",register:"method",type:"text"},{name:"Date Added",register:"dateAdded",type:"date"}],isNavigate:!1}),(0,y.jsxs)(t.W6,{children:[(0,y.jsx)("p",{className:"text-medium-emphasis small",children:"Here is the list of all orders."}),A||(0,y.jsx)(d.A,{defaultActiveKey:null===f||void 0===f?void 0:f[0],onSelect:e=>{return r=e,(0,c.u)("?","page",1),void m("?page=1&status=".concat(r));var r},id:"uncontrolled-tab-example",className:"mb-3",children:N})]})]})})]})})}},29189:(e,r,l)=>{l.d(r,{A:()=>h});var t=l(93946),s=l(65043),d=l(35475),a=l(85612),o=l(48907),n=l(92990),i=l(71643),c=l(39353),u=l(70579);const h=e=>{let{index:r,order:l,handleDeleteOrder:h,deleteLoading:x}=e;const[p,m]=(0,s.useState)(!1),{totalAmount:y,createdAt:j,updatedAt:v,paymentType:g,status:b,userName:O,userPhone:S,orderId:f,report:N}=l||{},[A,T]=(0,s.useState)(b),[w,{isLoading:C,updateError:P}]=(0,a.iO)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.A,{deleteThis:h,showModal:p,setShowModal:m,id:null===l||void 0===l?void 0:l._id,deleteLoading:x}),(0,u.jsxs)(t.YI,{children:[(0,u.jsx)(t.$s,{scope:"row",children:r+1}),(0,u.jsx)(t.cC,{children:O}),(0,u.jsx)(t.cC,{children:f}),(0,u.jsx)(t.cC,{children:S}),(0,u.jsx)(t.cC,{children:y}),(0,u.jsxs)(t.cC,{children:[g," ",N&&(0,u.jsxs)("span",{className:"text-danger text-uppercase",children:["REQ: ",null===N||void 0===N?void 0:N.requestedFor]})]}),(0,u.jsx)(t.cC,{children:new Date(j).toLocaleDateString()}),(0,u.jsx)(t.cC,{children:new Date(v).toLocaleDateString()}),(0,u.jsxs)(t.cC,{children:[C&&(0,u.jsx)("small",{children:"Loading.."}),P&&(0,u.jsx)("small",{className:"text-danger",children:"Error occured"}),(0,u.jsx)(t.MT,{style:{width:"150px"},"aria-label":"Product Select Selection Field",options:[{value:"pending",label:"Pending"},{value:"processing",label:"Processing"},{value:"shipped",label:"shipped"},{value:"cancelled",label:"Cancelled"},{value:"returned",label:"Returned"},{value:"delivered",label:"Delivered"},{value:"expired",label:"Expired"}],value:A,disabled:C,onChange:e=>{((e,r)=>{const l=e.target.value;T(l),w({id:r,data:{status:l}})})(e,null===l||void 0===l?void 0:l._id)}})]}),(0,u.jsx)(t.cC,{children:(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)(d.N_,{to:"/order/details/".concat(null===l||void 0===l?void 0:l._id),children:(0,u.jsx)(i.A,{})}),(0,u.jsx)(d.N_,{to:"/order/details/".concat(null===l||void 0===l?void 0:l._id),children:(0,u.jsx)(n.A,{})}),(0,u.jsx)(o.A,{setShowModal:m})]})})]})]})}},27491:(e,r,l)=>{l.d(r,{A:()=>v});var t=l(98139),s=l.n(t),d=l(65043),a=l(67852),o=l(64537),n=l(70579);const i=d.forwardRef(((e,r)=>{let{active:l=!1,disabled:t=!1,className:d,style:a,activeLabel:i="(current)",children:c,linkStyle:u,linkClassName:h,as:x=o.A,...p}=e;const m=l||t?"span":x;return(0,n.jsx)("li",{ref:r,style:a,className:s()(d,"page-item",{active:l,disabled:t}),children:(0,n.jsxs)(m,{className:s()("page-link",h),style:u,...p,children:[c,l&&i&&(0,n.jsx)("span",{className:"visually-hidden",children:i})]})})}));i.displayName="PageItem";const c=i;function u(e,r){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;const t=d.forwardRef(((e,t)=>{let{children:s,...d}=e;return(0,n.jsxs)(i,{...d,ref:t,children:[(0,n.jsx)("span",{"aria-hidden":"true",children:s||r}),(0,n.jsx)("span",{className:"visually-hidden",children:l})]})}));return t.displayName=e,t}const h=u("First","\xab"),x=u("Prev","\u2039","Previous"),p=u("Ellipsis","\u2026","More"),m=u("Next","\u203a"),y=u("Last","\xbb"),j=d.forwardRef(((e,r)=>{let{bsPrefix:l,className:t,size:d,...o}=e;const i=(0,a.oU)(l,"pagination");return(0,n.jsx)("ul",{ref:r,...o,className:s()(t,i,d&&"".concat(i,"-").concat(d))})}));j.displayName="Pagination";const v=Object.assign(j,{First:h,Prev:x,Ellipsis:p,Item:c,Next:m,Last:y})}}]);
//# sourceMappingURL=5805.fd44358a.chunk.js.map