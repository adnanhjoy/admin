"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[493],{60493:(e,l,s)=>{s.r(l),s.d(l,{default:()=>v});var i=s(65043),a=s(73216),n=s(93946),r=s(6145),t=s(96925),d=s(40632),o=s(24858),c=s(61347),u=s(46024);const m=c.apiSlice.injectEndpoints({endpoints:e=>({login:e.mutation({query:e=>({url:"/admin/login",method:"POST",body:e}),async onQueryStarted(e,l){let{dispatch:s,queryFulfilled:i}=l;try{var a,n,r,t,d,o;const e=await i;localStorage.setItem("auth",JSON.stringify({accessToken:null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.token,email:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.email,role:null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.role})),s((0,u.VS)({accessToken:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.token,email:null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.email,role:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.role}))}catch(c){}}})})}),{useRegisterMutation:h,useLoginMutation:x}=m;var j=s(2127),p=s(70579);const v=()=>{const[e,l]=(0,i.useState)(),[s,{isLoading:c,data:u,isError:m}]=x(),h=(0,a.Zp)(),{register:v,handleSubmit:g,watch:b,formState:{errors:y}}=(0,o.mN)();let k=null;return!c&&u&&(k=null,h("/dashboard")),!c&&m&&(k=(0,p.jsx)("p",{className:"text-center text-danger",children:"Authentication Failed"})),(0,p.jsx)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:(0,p.jsx)(n.T5,{children:(0,p.jsx)(n.sK,{className:"justify-content-center",children:(0,p.jsx)(n.UF,{lg:4,md:4,xs:12,children:(0,p.jsx)(n.x$,{children:(0,p.jsx)(n.E$,{className:"p-4",children:(0,p.jsx)(n.W6,{children:(0,p.jsxs)(n.qI,{onSubmit:g((e=>{k=null,s(e)})),children:[(0,p.jsx)("h1",{children:"Login"}),(0,p.jsx)("p",{className:"text-medium-emphasis",children:"Sign In to your account"}),(0,p.jsxs)(n.BG,{className:"mb-3",children:[(0,p.jsx)(n.sk,{children:(0,p.jsx)(r.A,{icon:t.o})}),(0,p.jsx)(n.OG,{type:"email",placeholder:"Email Address",...v("email",{required:!0})})]}),(0,p.jsxs)(n.BG,{className:"mb-4",children:[(0,p.jsx)(n.sk,{children:(0,p.jsx)(r.A,{icon:d.q})}),(0,p.jsx)(n.OG,{type:e?"text":"password",placeholder:"Password",className:"border-end-0",...v("password",{required:!0})}),(0,p.jsx)(n.sk,{className:"border-start-0 bg-transparent",style:{cursor:"pointer"},onClick:()=>l((e=>!e)),children:e?(0,p.jsx)(j.JPe,{}):(0,p.jsx)(j.Sq0,{})})]}),k&&k,(0,p.jsx)(n.sK,{children:(0,p.jsx)(n.UF,{xs:6,children:(0,p.jsx)(n.Q_,{type:"submit",color:"primary",className:"px-4",disabled:c,children:c?"Loading":" Login"})})})]})})})})})})})})}}}]);
//# sourceMappingURL=493.65c6ff86.chunk.js.map