"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[5254],{15254:(e,l,s)=>{s.r(l),s.d(l,{default:()=>p});var i=s(72791),a=s(57689),n=s(78983),r=s(24846),d=s(62412),t=s(63232),o=s(61134),c=s(60470),u=s(13541);const m=c.apiSlice.injectEndpoints({endpoints:e=>({login:e.mutation({query:e=>({url:"/admin/login",method:"POST",body:e}),async onQueryStarted(e,l){let{dispatch:s,queryFulfilled:i}=l;try{var a,n,r,d,t,o;const e=await i;localStorage.setItem("auth",JSON.stringify({accessToken:null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.token,email:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.email,role:null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.role})),s((0,u.PE)({accessToken:null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.token,email:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.email,role:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.role}))}catch(c){}}})})}),{useRegisterMutation:h,useLoginMutation:x}=m;var j=s(39126),v=s(80184);const p=()=>{const[e,l]=(0,i.useState)(),[s,{isLoading:c,data:u,isError:m}]=x(),h=(0,a.s0)(),{register:p,handleSubmit:b,watch:g,formState:{errors:y}}=(0,o.cI)();let w=null;return!c&&u&&(w=null,h("/dashboard")),!c&&m&&(w=(0,v.jsx)("p",{className:"text-center text-danger",children:"Authentication Failed"})),(0,v.jsx)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:(0,v.jsx)(n.KB,{children:(0,v.jsx)(n.rb,{className:"justify-content-center",children:(0,v.jsx)(n.b7,{lg:4,md:4,xs:12,children:(0,v.jsx)(n.dL,{children:(0,v.jsx)(n.xH,{className:"p-4",children:(0,v.jsx)(n.sl,{children:(0,v.jsxs)(n.lx,{onSubmit:b((e=>{w=null,s(e)})),children:[(0,v.jsx)("h1",{children:"Login"}),(0,v.jsx)("p",{className:"text-medium-emphasis",children:"Sign In to your account"}),(0,v.jsxs)(n.YR,{className:"mb-3",children:[(0,v.jsx)(n.wV,{children:(0,v.jsx)(r.Z,{icon:d.E})}),(0,v.jsx)(n.jO,{type:"email",placeholder:"Email Address",...p("email",{required:!0})})]}),(0,v.jsxs)(n.YR,{className:"mb-4",children:[(0,v.jsx)(n.wV,{children:(0,v.jsx)(r.Z,{icon:t.U})}),(0,v.jsx)(n.jO,{type:e?"text":"password",placeholder:"Password",className:"border-end-0",...p("password",{required:!0})}),(0,v.jsx)(n.wV,{className:"border-start-0 bg-transparent",style:{cursor:"pointer"},onClick:()=>l((e=>!e)),children:e?(0,v.jsx)(j.rCC,{}):(0,v.jsx)(j.I$m,{})})]}),w&&w,(0,v.jsx)(n.rb,{children:(0,v.jsx)(n.b7,{xs:6,children:(0,v.jsx)(n.u5,{type:"submit",color:"primary",className:"px-4",disabled:c,children:c?"Loading":" Login"})})})]})})})})})})})})}}}]);
//# sourceMappingURL=5254.9bcfa8d1.chunk.js.map