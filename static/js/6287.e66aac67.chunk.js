"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[6287],{34540:(e,a,l)=>{l.d(a,{BI:()=>n,NY:()=>i,dh:()=>s,vu:()=>d,vw:()=>r});const t=l(61347).apiSlice.injectEndpoints({tagTypes:["FlashSaleOffer","SingleFlashSaleOffer"],endpoints:e=>({getFlashSaleOffer:e.query({query:()=>({url:"/flashSale-offer",method:"GET"}),providesTags:["FlashSaleOffer"]}),getSingleFlashSaleOffer:e.query({query:e=>({url:"/flashSale-offer/".concat(e),method:"GET",headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),providesTags:["SingleFlashSaleOffer"]}),addFlashSaleOffer:e.mutation({query:e=>({url:"/flashSale-offer",method:"POST",body:e}),invalidatesTags:["FlashSaleOffer"]}),updateSingleFlashSaleOffer:e.mutation({query:e=>{let{id:a,data:l}=e;return{url:"/flashSale-offer/".concat(a),method:"PUT",body:l}},invalidatesTags:["FlashSaleOffer"]}),deleteSingleFlashSaleOfferById:e.mutation({query:e=>({url:"/flashSale-offer/".concat(e),method:"DELETE",body:e}),invalidatesTags:["FlashSaleOffer","SingleFlashSaleOffer"]})})}),{useGetFlashSaleOfferQuery:s,useGetSingleFlashSaleOfferQuery:r,useAddFlashSaleOfferMutation:i,useUpdateSingleFlashSaleOfferMutation:d,useDeleteSingleFlashSaleOfferByIdMutation:n}=t},16287:(e,a,l)=>{l.r(a),l.d(a,{default:()=>y});var t=l(93946),s=l(65043),r=l(73216),i=l(42145),d=l(61297),n=l(34540),o=l(28671),u=l(6145),c=l(59478),f=l(24858),h=l(25236),m=l(96208),v=l(94404);const S=e=>{const a=[];return null===e||void 0===e||e.forEach((e=>{a.push({value:e,label:e})})),a};var p=l(70579);const x=e=>{var a,l,i,d,n;let{onSubmit:x,loading:g,data:y,startDate:j,setStartDate:F,endDate:D,color:b,setColor:O,setEndDate:E}=e;const{id:N}=(0,r.g)(),{handleSubmit:T,control:q,register:w,errors:C,setValue:L}=(0,f.mN)(),{data:A,isLoading:U,isError:k}=(0,m.sB)(),I=null===A||void 0===A||null===(a=A.data)||void 0===a?void 0:a.map((e=>({value:null===e||void 0===e?void 0:e.name,label:null===e||void 0===e?void 0:e.name})));(0,s.useEffect)((()=>{if(y){for(const e in y)L(e,y[e]);F(y.startDate),E(y.endDate)}}),[y,L]);return(0,p.jsxs)(t.qI,{onSubmit:T(x),children:[(0,p.jsxs)(t.UF,{xs:12,children:[(0,p.jsx)("label",{className:"w-100",children:"Offer name"}),(0,p.jsx)(t.OG,{type:"text",id:"titleInputField",placeholder:"Enter types name","aria-describedby":"titleInputField",...w("name",{required:!0})}),"required"===(null===C||void 0===C||null===(l=C.name)||void 0===l?void 0:l.type)&&(0,p.jsx)("p",{className:"text-danger",children:"Name is required"})]}),(0,p.jsxs)(t.UF,{xs:12,children:[(0,p.jsx)("label",{className:"mb-0",children:"Select types for make offer"}),(0,p.jsx)(f.xI,{control:q,name:"offerType",rules:{required:!0},render:e=>{let{field:{onChange:a,value:l,name:t,ref:s}}=e;return(0,p.jsx)(h.Ay,{className:"mt-2",defaultValue:S(null===y||void 0===y?void 0:y.offerType),inputRef:s,options:I,value:null===I||void 0===I?void 0:I.find((e=>(null===e||void 0===e?void 0:e.value)===l)),onChange:e=>a(null===e||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.value))),isMulti:!0})}}),"required"===(null===C||void 0===C||null===(i=C.offerType)||void 0===i?void 0:i.type)&&(0,p.jsx)("p",{className:"text-danger",children:"OfferType is required"})]}),(0,p.jsxs)(t.sK,{children:[(0,p.jsxs)(t.UF,{xs:6,children:[(0,p.jsx)("label",{className:"text-primary",children:"Start Date"}),y&&(0,p.jsxs)("label",{htmlFor:"",className:" d-flex justify-content-between mb-1",children:[(0,p.jsx)("span",{children:new Date(j).toLocaleDateString()}),(0,p.jsx)("span",{children:new Date(j).toLocaleTimeString()})]}),(0,p.jsx)(t.OG,{placeholder:"Enter Start Date","aria-describedby":"startDate",defaultValue:j,onChange:e=>F(e.target.value),required:!y,onFocus:e=>e.target.type="datetime-local",onBlur:e=>e.target.type="text"}),"required"===(null===C||void 0===C||null===(d=C.startDate)||void 0===d?void 0:d.type)&&(0,p.jsx)("p",{className:"text-danger",children:"Start date is required"})]}),(0,p.jsxs)(t.UF,{xs:6,children:[(0,p.jsx)("label",{className:"text-primary",children:"End Date"}),y&&(0,p.jsxs)("label",{htmlFor:"",className:" d-flex justify-content-between mb-1",children:[(0,p.jsx)("span",{children:new Date(D).toLocaleDateString()}),(0,p.jsx)("span",{children:new Date(D).toLocaleTimeString()})]}),(0,p.jsx)(t.OG,{placeholder:"Enter End Date","aria-describedby":"endDate",defaultValue:D,required:!y,onChange:e=>E(e.target.value),onFocus:e=>e.target.type="datetime-local",onBlur:e=>e.target.type="text"}),"required"===(null===C||void 0===C||null===(n=C.endDate)||void 0===n?void 0:n.type)&&(0,p.jsx)("p",{className:"text-danger",children:"End date is required"})]}),(0,p.jsxs)(t.UF,{className:"mt-2",xs:12,children:[(0,p.jsxs)("label",{className:"mb-2",children:["Background Color ",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(c.Xq,{width:"350px",color:b,onChangeComplete:e=>{O(e.hex)}}),(0,p.jsxs)("p",{className:"mt-2",style:{color:"".concat(b)},children:["Selected color: ",b]})]})]}),(0,p.jsxs)("div",{className:"text-end  ",children:[(0,p.jsx)(v.A,{}),(0,p.jsxs)(t.Q_,{type:"submit",color:"success",className:"mt-3 text-white",children:[(0,p.jsx)(u.A,{icon:o.M,className:"me-2"}),g?"Loading...":N?"Update":"Save"]})]})]})};var g=l(4388);const y=()=>{const[e,a]=(0,s.useState)(!0),{id:l}=(0,r.g)(),[o,u]=(0,s.useState)(""),[c,f]=(0,s.useState)(""),h=(0,r.Zp)(),[m,v]=(0,s.useState)("#FFFFFF"),{data:S,isLoading:y,isError:j,error:F}=(0,n.vw)(l,{skip:e}),[D,{isLoading:b,isError:O,isSuccess:E,error:N}]=(0,n.NY)(),[T,{isLoading:q,isError:w,isSuccess:C,error:L}]=(0,n.vu)();return(0,s.useEffect)((()=>{var e,a;O&&i.oR.error((null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.message)||"Added Failed"),w&&i.oR.error((null===L||void 0===L||null===(a=L.data)||void 0===a?void 0:a.message)||"Updated Failed")}),[O,w]),(0,s.useEffect)((()=>{E&&h(-1),C&&h(-1)}),[E,C]),(0,s.useEffect)((()=>{l&&a(!1)}),[l]),(0,p.jsxs)(t.E$,{children:[(0,p.jsx)(g.A,{title:l?"Customize flashSale offer":"Add flashSale offer"}),y?(0,p.jsx)(d.A,{}):(0,p.jsx)(t.W6,{children:(0,p.jsx)(x,{loading:q||b,data:null===S||void 0===S?void 0:S.result,onSubmit:e=>{const a=new Date(o).getTime(),t=new Date(c).getTime()-a+(a-Date.now())+Date.now(),s=null===S||void 0===S?void 0:S.result,r={...s,name:e.name||(null===s||void 0===s?void 0:s.name),startDate:o||(null===s||void 0===s?void 0:s.startDate),endDate:c||(null===s||void 0===s?void 0:s.startDate),timeStamps:t||(null===s||void 0===s?void 0:s.timeStamps),offerType:e.offerType||(null===s||void 0===s?void 0:s.offerType),status:"active",color:m};l?T({id:l,data:r}):D(r)},startDate:o,setStartDate:u,endDate:c,setEndDate:f,color:m,setColor:v})})]})}}}]);
//# sourceMappingURL=6287.e66aac67.chunk.js.map