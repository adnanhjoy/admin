"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[8432],{14852:(e,t,s)=>{s.d(t,{fP:()=>a,gA:()=>r,q_:()=>o,tP:()=>l});const n=s(61347).apiSlice.injectEndpoints({tagTypes:["AllNewUserDiscount","singleDiscount"],endpoints:e=>({getAllNewUserDiscount:e.query({query:()=>({url:"/newUserDiscount",method:"GET"}),providesTags:["AllNewUserDiscount"]}),getSingleNewUserDiscountById:e.query({query:e=>({url:"/newUserDiscount/".concat(e),method:"GET",headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),providesTags:["singleDiscount"]}),addNewCustomerDiscount:e.mutation({query:e=>({url:"/newUserDiscount",method:"POST",body:e}),invalidatesTags:["AllNewUserDiscount"]}),updateSingleNewUserDiscountById:e.mutation({query:e=>{let{id:t,data:s}=e;return{url:"/newUserDiscount/".concat(t),method:"PUT",body:s}},invalidatesTags:["AllNewUserDiscount"]}),deleteSingleNewUserDiscountById:e.mutation({query:e=>({url:"/newUserDiscount/".concat(e),method:"DELETE",body:e}),invalidatesTags:["AllNewUserDiscount","singleDiscount"]})})}),{useGetAllNewUserDiscountQuery:a,useGetSingleNewUserDiscountByIdQuery:i,useAddNewCustomerDiscountMutation:l,useUpdateSingleNewUserDiscountByIdMutation:r,useDeleteSingleNewUserDiscountByIdMutation:o}=n},13353:(e,t,s)=>{s.d(t,{A:()=>c});var n=s(28671),a=s(6145),i=s(93946),l=s(65043),r=s(24858),o=s(70579);const d=e=>{let{showModal:t,setShowModal:s,offerPropsData:d,title:c,handlePostOrderFunction:u,isLoading:m,isUpdate:h,defaultOfferData:x,handleUpdateFunction:p}=e;const{reset:D,register:g,handleSubmit:f,control:y}=(0,r.mN)(),[j,w]=(0,l.useState)(""),[b,v]=(0,l.useState)("");return(0,o.jsxs)(i.zS,{visible:t,onClose:()=>{s(!1)},className:"offerModal",children:[(0,o.jsxs)(i.E4,{closeButton:!0,children:[c," "]}),(0,o.jsx)(i.Tc,{children:(0,o.jsx)(i.qI,{id:"handleSubmitForm",onSubmit:f((e=>{const t=new Date(j).getTime(),s=new Date(b).getTime();let n=null;t&&s&&(n=s-t+(t-Date.now())+Date.now());const a={...e,discount:parseInt(e.discount),startDate:j||x.startDate,endDate:b||x.endDate,timeStamps:n||(null===x||void 0===x?void 0:x.timeStamps),status:"active"};if(h){const e=null===x||void 0===x?void 0:x._id;p({data:a,id:e})}else u(a),D()})),children:(0,o.jsxs)(i.sK,{className:"g-3",children:[(0,o.jsx)(i.UF,{xs:12,children:(0,o.jsx)(i.OG,{type:"text",id:"discountInputField",label:"Offer Name",defaultValue:null===x||void 0===x?void 0:x.name,placeholder:"Enter offer name","aria-describedby":"discountInputField",min:"0",...g("name",{required:!0,min:0,max:100})})}),(0,o.jsxs)(i.UF,{xs:12,children:[(0,o.jsx)("label",{className:"mb-2",children:"Discount Type"}),(0,o.jsx)("br",{}),(0,o.jsx)(i.CK,{inline:!0,type:"radio",name:"discountTypeOptions",id:"discountTypePercentage",label:"Percentage",defaultChecked:"percentage"===(null===x||void 0===x?void 0:x.discountType),value:"percentage",...g("discountType",{required:!0})}),(0,o.jsx)(i.CK,{inline:!0,type:"radio",name:"discountTypeOptions",id:"discountTypeFixedAmount",defaultChecked:"fixedAmount"===(null===x||void 0===x?void 0:x.discountType),label:"Fixed Amount",value:"fixedAmount",...g("discountType",{required:!0})})]}),(0,o.jsx)(i.UF,{xs:12,children:(0,o.jsx)(i.OG,{type:"number",id:"discountInputField",label:"Discount",placeholder:"Enter Discount",defaultValue:null===x||void 0===x?void 0:x.discount,"aria-describedby":"discountInputField",min:"0",...g("discount",{required:!0,min:0,max:100})})}),(0,o.jsxs)(i.UF,{xs:6,children:[(0,o.jsx)("label",{className:"text-primary",children:"Start Date"}),x&&(0,o.jsxs)("label",{htmlFor:"",className:" d-flex justify-content-between mb-1",children:[(0,o.jsx)("span",{children:new Date(j).toLocaleDateString()}),(0,o.jsx)("span",{children:new Date(j).toLocaleTimeString()})]}),(0,o.jsx)(i.OG,{placeholder:"Enter Start Date","aria-describedby":"startDate",defaultValue:j,onChange:e=>w(e.target.value),required:!x,onFocus:e=>e.target.type="datetime-local",onBlur:e=>e.target.type="text"})]}),(0,o.jsxs)(i.UF,{xs:6,children:[(0,o.jsx)("label",{className:"text-primary",children:"End Date"}),x&&(0,o.jsxs)("label",{htmlFor:"",className:" d-flex justify-content-between mb-1",children:[(0,o.jsx)("span",{children:new Date(b).toLocaleDateString()}),(0,o.jsx)("span",{children:new Date(b).toLocaleTimeString()})]}),(0,o.jsx)(i.OG,{placeholder:"Enter End Date","aria-describedby":"endDate",defaultValue:b,required:!x,onChange:e=>v(e.target.value),onFocus:e=>e.target.type="datetime-local",onBlur:e=>e.target.type="text"})]})]})})}),(0,o.jsxs)(i.If,{children:[(0,o.jsx)(i.Q_,{color:"secondary",onClick:()=>{s(!1)},children:"Cancel"}),(0,o.jsxs)(i.Q_,{disabled:m,form:"handleSubmitForm",type:"submit",color:"success",className:"text-white",children:[(0,o.jsx)(a.A,{icon:n.M,className:"me-2"})," ",h?(0,o.jsx)(o.Fragment,{children:"Update"}):(0,o.jsx)(o.Fragment,{children:m?"Loading..":"Save"})]})]})]})},c=(0,l.memo)(d)},68432:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var n=s(93946),a=s(65043),i=s(73216),l=s(42145),r=s(14852),o=s(13353),d=s(70579);const c=()=>{const[e,t]=(0,a.useState)(!1),s=(0,i.Zp)(),[c,{isLoading:u,isError:m,isSuccess:h,error:x}]=(0,r.tP)();return(0,a.useEffect)((()=>{var e;h&&l.oR.success("Offer created successfully"),m&&l.oR.error((null===x||void 0===x||null===(e=x.data)||void 0===e?void 0:e.message)||"could not create the offer")}),[h,m]),(0,a.useEffect)((()=>{h&&s(-1)}),[h]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.Q_,{onClick:()=>{t(!0)},children:"New Customer Offer"}),(0,d.jsx)(o.A,{setShowModal:t,showModal:e,offerPropsData:[],title:"New customer offer",handlePostOrderFunction:c,isLoading:u})]})},u=()=>(0,d.jsx)(n.sK,{children:(0,d.jsx)(n.UF,{xs:12,children:(0,d.jsx)("div",{className:"mb-4 d-flex gap-2 justify-content-center align-items-center mt-4 flex-wrap",children:(0,d.jsx)(c,{})})})})}}]);
//# sourceMappingURL=8432.ae38992d.chunk.js.map