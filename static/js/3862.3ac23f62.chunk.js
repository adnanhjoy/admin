"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[3862],{38980:(e,i,s)=>{s.r(i),s.d(i,{default:()=>f});var a=s(28671),t=s(6145),r=s(93946),n=s(65043),o=s(33637),d=s(73216),l=s(42145),u=s(82731),c=s(20246),p=s(61297),g=s(73747),v=s(70579);const f=()=>{const{id:e}=(0,d.g)(),[i,s]=(0,n.useState)(!0),[f,m]=(0,n.useState)(""),[h,S]=(0,n.useState)(""),[y,x]=(0,n.useState)(""),[j,b]=(0,n.useState)([]),[N,P]=(0,n.useState)([]),[k,D]=(0,n.useState)(),[T,O]=(0,n.useState)([]),[E,F]=(0,n.useState)(""),[J,w]=(0,n.useState)(),[C,A]=(0,n.useState)([]),[I,{isLoading:L,isSuccess:U,isError:M,error:q}]=(0,c.ZN)(),[z,{isLoading:R,isSuccess:V,isError:_,error:Q}]=(0,c.P5)(),{data:Z,isLoading:B,isError:K}=(0,c.PF)(e,{skip:i});(0,n.useMemo)((()=>{var e,i;M&&l.oR.error(null===q||void 0===q||null===(e=q.data)||void 0===e?void 0:e.message),_&&l.oR.error(null===Q||void 0===Q||null===(i=Q.data)||void 0===i?void 0:i.message)}),[M,_]);const W=(0,d.Zp)();(0,n.useEffect)((()=>{U&&W("/product"),V&&W("/product")}),[U,V]),(0,n.useMemo)((()=>{var i,a,t,r,n,o,d;e&&(s(!1),P(null===Z||void 0===Z||null===(i=Z.result)||void 0===i?void 0:i.tags),m(null===Z||void 0===Z||null===(a=Z.result)||void 0===a?void 0:a.description),S(null===Z||void 0===Z||null===(t=Z.result)||void 0===t?void 0:t.shortDescription),x(null===Z||void 0===Z||null===(r=Z.result)||void 0===r?void 0:r.specification),F(null===Z||void 0===Z||null===(n=Z.result)||void 0===n||null===(o=n.manufacturer)||void 0===o?void 0:o._id),w(null===Z||void 0===Z||null===(d=Z.result)||void 0===d?void 0:d.slug))}),[e,null===Z||void 0===Z?void 0:Z.result]);return(0,v.jsx)(r.sK,{children:(0,v.jsx)(r.UF,{xs:12,children:(0,v.jsxs)(r.E$,{className:"mb-4",children:[(0,v.jsx)(r.V0,{children:(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsxs)("strong",{children:[e?"Edit":"Add"," Product"]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsxs)(r.Q_,{disabled:R||L,type:"submit",form:"addProductForm1",color:"success",className:"",children:[(0,v.jsx)(t.A,{icon:a.M,className:"me-2"}),R||L?"Loading...":e?"Update":" Save"]}),(0,v.jsx)(r.jl,{content:"Back",children:(0,v.jsx)(r.Q_,{onClick:()=>W(-1),color:"",className:"border ms-2",children:(0,v.jsx)(o.A,{fluid:!0,src:g,style:{width:"20px"}})})})]})]})}),(0,v.jsx)(r.W6,{children:B?(0,v.jsx)(p.A,{}):K?(0,v.jsx)("p",{children:"There was an error"}):(0,v.jsx)(u.A,{images:T,setImages:O,data:null===Z||void 0===Z?void 0:Z.result,description:f,setDescription:m,shortDescription:h,setShortDescription:S,specification:y,setSpecification:x,productTags:N,setProductTags:P,selectedStatus:k,setSelectedStatus:D,loading:R|L,onSubmit:i=>{var s,a,t,r,n;const o=new FormData;for(const e of Object.keys(T))o.append("images",i.images[e]);o.append("flashSale",!1),i.name&&o.append("name",i.name),i.altTag&&o.append("altTag",i.altTag),f&&o.append("description",f),h&&o.append("shortDescription",h),y&&o.append("specification",y),J&&o.append("slug",J),i.freeShipping&&o.append("freeShipping",i.freeShipping),E&&"Pick one"!==E&&o.append("manufacturer",E),i.status&&o.append("status",i.status),i.productType&&o.append("productType",i.productType),i.expireDate&&o.append("expireDate",i.expireDate),o.append("model",i.model),i.price&&o.append("price",parseFloat(i.price)),i.offerPrice&&o.append("offerPrice",parseFloat(i.offerPrice)),i.discountPercentage&&o.append("discountPercentage",parseFloat(i.discountPercentage)||0),i.quantity&&o.append("quantity",parseInt(i.quantity)),N&&o.append("tags",JSON.stringify(N)),j&&o.append("libraryUrls",JSON.stringify(j)),(null===(s=i.color)||void 0===s?void 0:s.length)>0&&o.append("color",JSON.stringify(null===i||void 0===i?void 0:i.color)),(null===(a=i.size)||void 0===a?void 0:a.length)>0&&o.append("size",JSON.stringify(null===i||void 0===i?void 0:i.size)),(null===(t=i.categories)||void 0===t?void 0:t.length)>0&&o.append("categories",JSON.stringify(null===i||void 0===i?void 0:i.categories)),(null===(r=i.subcategories)||void 0===r?void 0:r.length)>0&&o.append("subcategories",JSON.stringify(null===i||void 0===i?void 0:i.subcategories)),(null===(n=i.subcategoryChildren)||void 0===n?void 0:n.length)>0&&o.append("subcategoryChildren",JSON.stringify(null===i||void 0===i?void 0:i.subcategoryChildren)),e?(C.forEach((e=>{o.append("prevImage",e)})),I({id:e,data:o})):z(o),console.log(i)},remainingImages:C,setRemainingImages:A,manufacturer:E,setManufacturer:F,slugValue:J,libraryUrls:j,setLibraryUrls:b,setSlugValue:w})})]})})})}}}]);
//# sourceMappingURL=3862.3ac23f62.chunk.js.map