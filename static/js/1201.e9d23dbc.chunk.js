"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[1201],{65303:(e,o,t)=>{t.d(o,{S3:()=>s,h8:()=>l,mS:()=>d,po:()=>i,sv:()=>n});const a=t(60470).apiSlice.injectEndpoints({tagTypes:["AllCoupons","SingleCoupon"],endpoints:e=>({getAllCoupons:e.query({query:()=>({url:"/coupon",method:"GET",headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),providesTags:["AllCoupons"]}),getSingleCoupon:e.query({query:e=>({url:"/coupon/".concat(e),method:"GET",headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),invalidatesTags:["AllCoupons"],providesTags:["SingleCoupon"]}),addSingleCouponById:e.mutation({query:e=>({url:"/coupon/add",method:"POST",body:e,headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),invalidatesTags:["AllCoupons"]}),updateSingleCoupon:e.mutation({query:e=>{let{id:o,data:t}=e;return{url:"/coupon/".concat(o),method:"PUT",body:t}},invalidatesTags:["AllCoupons","SingleCoupon"]}),deleteSingleCoupon:e.mutation({query:e=>({url:"/coupon/".concat(e),method:"DELETE",body:e,headers:{Authorization:JSON.parse(localStorage.getItem("auth")).accessToken}}),invalidatesTags:["AllCoupons"]})})}),{useGetAllCouponsQuery:n,useDeleteSingleCouponMutation:i,useAddSingleCouponByIdMutation:d,useUpdateSingleCouponMutation:l,useGetSingleCouponQuery:s}=a},71201:(e,o,t)=>{t.r(o),t.d(o,{default:()=>g});var a=t(78983),n=t(72791),i=t(57689),d=t(9085),l=t(42439),s=t(24846),u=t(61134),r=t(73779),c=t(80184);const p=e=>{var o;let{onSubmit:t,data:i,addLoading:d,updateLoading:p,setSelectedDate:m,selectedDate:x}=e;const[g,h]=(0,n.useState)(null===i||void 0===i?void 0:i.discountType);(0,n.useEffect)((()=>{h(null===i||void 0===i?void 0:i.discountType),m(null===i||void 0===i?void 0:i.expireDate)}),[null===i||void 0===i?void 0:i.discountType]);const{register:b,handleSubmit:y}=(0,u.cI)(),C=e=>{h(e.target.value)};return(0,c.jsxs)(a.lx,{onSubmit:y(t),children:[(0,c.jsxs)(a.rb,{className:"g-3",children:[(0,c.jsx)(a.b7,{xs:12,children:(0,c.jsx)(a.jO,{type:"text",id:"CouponNameInputField",label:"Coupon Name",placeholder:"Enter Coupon Name",defaultValue:null===i||void 0===i?void 0:i.couponName,"aria-describedby":"CouponNameInputField",...b("couponName",{required:!i})})}),(0,c.jsx)(a.b7,{xs:12,children:(0,c.jsx)(a.jO,{id:"couponCodeInputField",label:"Coupon Code",placeholder:"Enter Coupon Code",defaultValue:null===i||void 0===i?void 0:i.couponCode,"aria-describedby":"couponCodeInputField",...b("couponCode",{required:!i})})}),(0,c.jsxs)(a.b7,{xs:12,children:[(0,c.jsxs)("label",{className:"mb-2",children:["Expire date:  ",i&&(0,c.jsx)("span",{className:"text-primary",children:null===(o=new Date(x))||void 0===o?void 0:o.toDateString()})]}),(0,c.jsx)(a.jO,{type:"text",id:"expireDate",placeholder:"Enter Expire Date","aria-describedby":"expireDate",defaultValue:x,onChange:e=>{m(e.target.value)},onFocus:e=>e.target.type="datetime-local",onBlur:e=>e.target.type="text"})]}),(0,c.jsxs)(a.b7,{xs:12,children:[(0,c.jsx)("label",{className:"mb-2",children:"Discount Type"}),(0,c.jsx)("br",{}),(0,c.jsx)(a.EC,{inline:!0,type:"radio",name:"discountTypeOptions",id:"discountTypePercentage",checked:"percentage"===g,value:"percentage",label:"Percentage",...b("discountType",{required:!i}),onChange:e=>C(e)}),(0,c.jsx)(a.EC,{inline:!0,type:"radio",name:"discountTypeOptions",id:"discountTypeFixedAmount",checked:"fixedAmount"===g,value:"fixedAmount",label:"Fixed Amount",...b("discountType",{required:!i}),onChange:e=>C(e)})]}),(0,c.jsx)(a.b7,{xs:12,children:(0,c.jsx)(a.jO,{type:"number",id:"discountInputField",label:"Discount",placeholder:"Enter Discount",defaultValue:null===i||void 0===i?void 0:i.discount,"aria-describedby":"discountInputField",...b("discount",{required:!i})})}),(0,c.jsx)(a.b7,{xs:12,children:(0,c.jsx)(a.jO,{type:"number",id:"totalAmountInputField",label:"Total Amount (for activate coupon)",placeholder:"Enter Total Amount",defaultValue:null===i||void 0===i?void 0:i.totalAmount,"aria-describedby":"totalAmountInputField",...b("totalAmount",{required:!i})})})]}),(0,c.jsxs)("div",{className:"text-end",children:[(0,c.jsx)(r.Z,{}),(0,c.jsxs)(a.u5,{type:"submit",color:"primary",className:"mt-3",children:[(0,c.jsx)(s.Z,{icon:l.q,className:"me-2"}),d||p?"Loading..":"Save"]})]})]})};var m=t(65303),x=t(39432);const g=()=>{const{id:e}=(0,i.UO)(),[o,t]=(0,n.useState)(),l=(0,i.s0)(),{data:s,isLoading:u,isError:r}=(0,m.S3)(e,{skip:!e}),[g,{isLoading:h,isError:b,isSuccess:y}]=(0,m.mS)(),[C,{isLoading:j,isError:S,isSuccess:v}]=(0,m.h8)(),A=t=>{const a={...t,discount:Number(t.discount),totalAmount:Number(t.totalAmount),expireDate:o};e?C({id:e,data:a}):g(a)};let T=null;return u&&(T=(0,c.jsx)("p",{children:"Loading..."})),!u&&r&&(T=(0,c.jsx)("p",{className:"text-danger",children:"There is something wrong!"})),u||r||(T=(0,c.jsx)(p,{selectedDate:o,setSelectedDate:t,addLoading:h,updateLoading:j,onSubmit:A,data:s})),(0,n.useEffect)((()=>{d.Am.dismiss(),b&&d.Am.error("Adding Failed",{id:"aFailed"}),S&&d.Am.error("Update Failed",{id:"uFailed"})}),[S,b]),(0,n.useEffect)((()=>{y&&l(-1),v&&l(-1)}),[v,l,y]),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(a.rb,{children:(0,c.jsx)(a.b7,{xs:12,children:(0,c.jsxs)(a.xH,{className:"mb-4",children:[(0,c.jsx)(x.Z,{title:e?"Update coupon":"Add Coupon"}),(0,c.jsx)(a.sl,{children:T})]})})})})}}}]);
//# sourceMappingURL=1201.e9d23dbc.chunk.js.map