"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[5596],{64532:(e,a,s)=>{s.d(a,{Dj:()=>i,FQ:()=>c,JE:()=>n,N8:()=>m,PO:()=>u,QG:()=>t,n7:()=>o,nX:()=>d});const r=s(61347).apiSlice.injectEndpoints({tagTypes:["AllAdmin","SingleAdmin","AllManager"],endpoints:e=>({getAllAdmins:e.query({query:()=>({url:"/admin/allAdmin",method:"GET"}),providesTags:["AllAdmin"]}),getSingleAdmin:e.query({query:e=>({url:"/admin/".concat(e),method:"GET"}),providesTags:["SingleAdmin"]}),createNewAdmin:e.mutation({query:e=>({url:"/admin/register",method:"POST",body:e}),invalidatesTags:["SingleAdmin"]}),changeAdminPassword:e.mutation({query:e=>{let{email:a,data:s}=e;return{url:"/admin/changeAdminPassword/".concat(a),method:"PUT",body:s}},invalidatesTags:["SingleAdmin"]}),deleteAdmin:e.mutation({query:e=>({url:"/admin/deleteAdmin/".concat(e),method:"DELETE"}),invalidatesTags:["AllAdmin"]}),getAllManager:e.query({query:()=>({url:"/admin/manager/all",method:"GET"}),providesTags:["AllManager"]}),addManager:e.mutation({query:e=>({url:"/admin/manger",method:"POST",body:e}),invalidatesTags:["AllManager"]}),updateManager:e.mutation({query:e=>{let{id:a,data:s}=e;return{url:"/admin/updateAndPasswordChange/".concat(a),method:"PUT",body:s}},invalidatesTags:["AllManager","SingleAdmin"]}),deleteManager:e.mutation({query:e=>{let{id:a,currentUserEmail:s}=e;return{url:"/admin/manager/".concat(a),method:"DELETE",body:{currentUserEmail:s}}},invalidatesTags:["AllManager"]})})}),{useGetAllAdminsQuery:d,useGetSingleAdminQuery:i,useCreateNewAdminMutation:l,useDeleteAdminMutation:n,useGetAllManagerQuery:t,useAddManagerMutation:o,useDeleteManagerMutation:m,useUpdateManagerMutation:u,useChangeAdminPasswordMutation:c}=r},35596:(e,a,s)=>{s.r(a),s.d(a,{default:()=>v});var r=s(93946),d=s(65043),i=s(5137),l=s(73216),n=s(42145),t=s(27166),o=s(6145),m=s(24858),u=s(2127),c=s(94404),g=s(25236),x=s(70579);const h=e=>{let{data:a,isLoading:s,onSubmit:i,setRole:n}=e;const{register:h,handleSubmit:p,formState:{errors:j},setValue:A}=(0,m.mN)(),v=(0,l.zy)().search,[y,b]=(0,d.useState)(!1),[E,w]=(0,d.useState)(!1),N=[{value:"admin",label:"Admin"},{value:"manager",label:"Manager"}],[S,P]=(0,d.useState)(null);return(0,d.useEffect)((()=>{const e=null===a||void 0===a?void 0:a.role,s=N.find((a=>a.value===e));P(s)}),[a]),(0,x.jsxs)(r.qI,{onSubmit:p(i),children:[(0,x.jsxs)(r.sK,{className:"g-3",children:[(0,x.jsxs)(r.A6,{htmlFor:"oldPassword",children:["Name ",!a&&(0,x.jsx)("span",{className:"text-danger",children:"*"})]}),(0,x.jsxs)(r.UF,{xs:12,children:[(0,x.jsx)(r.OG,{type:"text",id:"firstNameInputField",placeholder:"Enter Name",defaultValue:null===a||void 0===a?void 0:a.name,"aria-describedby":"adminName",...h("name",{required:!a})}),(null===j||void 0===j?void 0:j.name)&&(0,x.jsx)("div",{className:"text-danger form-error",children:"Name is required"})]}),(0,x.jsxs)(r.UF,{xs:12,children:[(0,x.jsxs)(r.A6,{htmlFor:"oldPassword",children:["Email ",!a&&(0,x.jsx)("span",{className:"text-danger",children:"*"})]}),(0,x.jsx)(r.OG,{type:"text",id:"emailInputField",placeholder:"Enter Email",disabled:!!a,defaultValue:null===a||void 0===a?void 0:a.email,"aria-describedby":"emailInputField",...h("email",{required:!a})}),(null===j||void 0===j?void 0:j.email)&&(0,x.jsx)("div",{className:"text-danger form-error",children:"Email is required "})]}),a&&(0,x.jsxs)(r.UF,{xs:12,children:[(0,x.jsx)(r.A6,{htmlFor:"Password",children:"Enter old password"}),(0,x.jsxs)(r.BG,{children:[(0,x.jsx)(r.OG,{type:y?"text":"password",id:"Password",placeholder:"Enter old password","aria-describedby":"Password",className:"border-end-0",...h("oldPassword",{required:!1})}),(0,x.jsx)(r.sk,{className:"border-start-0 bg-transparent",style:{cursor:"pointer"},onClick:()=>b((e=>!e)),children:y?(0,x.jsx)(u.JPe,{}):(0,x.jsx)(u.Sq0,{})})]})]}),(0,x.jsxs)(r.UF,{xs:12,children:[(0,x.jsxs)(r.A6,{htmlFor:"Password",children:[a?"Enter new password":"Password"," ",!a&&(0,x.jsx)("span",{className:"text-danger",children:"*"})]}),(0,x.jsxs)(r.BG,{children:[(0,x.jsx)(r.OG,{type:E?"text":"password",id:"Password",placeholder:"Enter password","aria-describedby":"Password",className:"border-end-0",...h("password",{required:!a})}),(0,x.jsx)(r.sk,{className:"border-start-0 bg-transparent",style:{cursor:"pointer"},onClick:()=>w((e=>!e)),children:E?(0,x.jsx)(u.JPe,{}):(0,x.jsx)(u.Sq0,{})})]}),(null===j||void 0===j?void 0:j.password)&&(0,x.jsx)("div",{className:"text-danger form-error",children:"Password is required"})]})]}),!v.includes("superAdmin")&&S&&(0,x.jsxs)(r.UF,{xs:12,children:[(0,x.jsxs)("label",{className:"mb-2",children:["Role ",(0,x.jsx)("span",{className:"text-danger",children:"*"})]}),(0,x.jsx)(g.Ay,{"aria-label":"Selection Field",defaultValue:S,options:N,onChange:e=>n(e.value),name:"role"})]}),!a&&(0,x.jsxs)(r.UF,{xs:12,children:[(0,x.jsxs)("label",{className:"mb-2",children:["Role ",(0,x.jsx)("span",{className:"text-danger",children:"*"})," "]}),(0,x.jsx)(g.Ay,{"aria-label":"Selection Field",defaultValue:S,options:N,onChange:e=>n(e.value),name:"role"})]}),(0,x.jsxs)("div",{className:"text-end",children:[(0,x.jsx)(c.A,{}),(0,x.jsxs)(r.Q_,{type:"submit",color:"primary",className:"mt-3",children:[(0,x.jsx)(o.A,{icon:t.x,className:"me-2"}),s?"Loading..":"Save"]})]})]})},p=(0,d.memo)(h);var j=s(64532),A=s(4388);const v=()=>{const{email:e}=(0,i.d4)((e=>e.auth))||{},a=(0,l.Zp)(),s=(0,l.zy)().search,[t,o]=(0,d.useState)("manager"),{id:m}=(0,l.g)(),[u,c]=(0,d.useState)(!0),{data:g,isLoading:h,isError:v}=(0,j.Dj)(m,{skip:u}),[y,{isLoading:b,error:E,isError:w,isSuccess:N}]=(0,j.n7)(),[S,{isLoading:P,error:f,isError:q,isSuccess:M}]=(0,j.PO)(),[F,{isLoading:T,error:U,isError:G,isSuccess:k}]=(0,j.FQ)();(0,d.useMemo)((()=>{m&&c(!1)}),[m,c]);return(0,d.useEffect)((()=>{var e,a,s;n.oR.dismiss(),w&&n.oR.error((null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.message)||"Added failed",{id:"aError"}),q&&n.oR.error((null===f||void 0===f||null===(a=f.data)||void 0===a?void 0:a.message)||"Updated failed",{id:"aError"}),G&&n.oR.error((null===U||void 0===U||null===(s=U.data)||void 0===s?void 0:s.message)||"Updated failed",{id:"adminError"})}),[w,q,G]),(0,d.useEffect)((()=>{n.oR.dismiss(),N&&a(-1),M&&a(-1),k&&a(-1)}),[N,M,k]),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(r.sK,{children:(0,x.jsx)(r.UF,{xs:12,children:(0,x.jsxs)(r.E$,{className:"mb-4",children:[(0,x.jsx)(A.A,{title:m?"Update admin":"Add admin"}),(0,x.jsx)(r.W6,{children:(0,x.jsx)(p,{isLoading:P||b||T,data:g,setRole:o,onSubmit:a=>{const r={...a,currentUserEmail:e,role:t};m?s.includes("superAdmin")?F({email:e,data:r}):S({id:m,data:r}):y(r)}})})]})})})})}}}]);
//# sourceMappingURL=5596.cc81c6b1.chunk.js.map