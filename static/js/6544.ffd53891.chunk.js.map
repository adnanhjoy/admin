{"version":3,"file":"static/js/6544.ffd53891.chunk.js","mappings":"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","sources":["views/products/add-product/AddProduct.jsx"],"sourcesContent":["/* eslint-disable no-lone-blocks */\n/* eslint-disable prettier/prettier */\nimport { cilSave } from \"@coreui/icons\";\nimport CIcon from \"@coreui/icons-react\";\nimport { CButton, CCard, CCardBody, CCardHeader, CCol, CRow, CTooltip } from \"@coreui/react\";\nimport { useEffect } from \"react\";\nimport { useState, useMemo } from \"react\";\nimport { Image } from \"react-bootstrap\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport AddProductForm from \"src/components/products/AddProductForm\";\nimport {\n  useAddSingleProductMutation,\n  useGetSingleProductDetailsQuery,\n  useUpdateSingleProductMutation,\n} from \"src/redux/products/productsApi\";\nimport Loading from \"src/ui/Loading\";\nimport back from \"../../../assets/brand/back.png\";\n\nconst AddProduct = () => {\n  const { id } = useParams();\n  const [productId, setProductId] = useState(true);\n  const [description, setDescription] = useState(\"\");\n  const [shortDescription, setShortDescription] = useState(\"\");\n  const [specification, setSpecification] = useState(\"\");\n  const [libraryUrls, setLibraryUrls] = useState([])\n  const [productTags, setProductTags] = useState([]);\n  const [selectedStatus, setSelectedStatus] = useState();\n  const [imgData, setImgData] = useState([]);\n  const [manufacturer, setManufacturer] = useState(\"\");\n  const [slugValue, setSlugValue] = useState();\n\n  //remaining images\n  const [remainingImages, setRemainingImages] = useState([]);\n\n  // rtk hooks\n  const [\n    updateSingleProduct,\n    {\n      isLoading: updateLoading,\n      isSuccess: updateSuccess,\n      isError: updateError,\n      error: updateErrorMsg,\n    },\n  ] = useUpdateSingleProductMutation();\n\n  const [\n    adSingleProduct,\n    { isLoading: addLoading, isSuccess: addSuccess, isError: addError, error: addErrorMsg },\n  ] = useAddSingleProductMutation();\n\n  const {\n    data: product,\n    isLoading,\n    isError,\n  } = useGetSingleProductDetailsQuery(id, { skip: productId });\n\n  //rtk hooks end\n  useMemo(() => {\n    updateError && toast.error(updateErrorMsg?.data?.message);\n    addError && toast.error(addErrorMsg?.data?.message);\n  }, [updateError, addError]);\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    updateSuccess && navigate(\"/product\");\n    addSuccess && navigate(\"/product\");\n  }, [updateSuccess, addSuccess]);\n\n  useMemo(() => {\n    if (id) {\n      setProductId(false);\n      setProductTags(product?.result?.tags);\n      setDescription(product?.result?.description);\n      setShortDescription(product?.result?.shortDescription);\n      setSpecification(product?.result?.specification);\n      setManufacturer(product?.result?.manufacturer?._id);\n      setSlugValue(product?.result?.slug);\n    }\n  }, [id, product?.result]);\n\n  // handle add a new product\n  const handleCreateProduct = (data) => {\n    const formData = new FormData();\n    for (const key of Object.keys(imgData)) {\n      formData.append(\"images\", data.images[key]);\n    }\n    formData.append(\"flashSale\", false);\n\n    if (data.name) formData.append(\"name\", data.name);\n    if (data.altTag) formData.append(\"altTag\", data.altTag);\n    if (description) formData.append(\"description\", description);\n    if (shortDescription) formData.append(\"shortDescription\", shortDescription);\n    if (specification) formData.append(\"specification\", specification);\n    if (slugValue) formData.append(\"slug\", slugValue);\n    if (data.freeShipping) formData.append(\"freeShipping\", data.freeShipping);\n\n    if (manufacturer && manufacturer !== \"Pick one\") formData.append(\"manufacturer\", manufacturer);\n    if (data.status) formData.append(\"status\", data.status);\n    if (data.productType) formData.append(\"productType\", data.productType);\n    if (data.expireDate) formData.append(\"expireDate\", data.expireDate);\n    formData.append(\"model\", data.model);\n\n    if (data.price) formData.append(\"price\", parseFloat(data.price));\n    if (data.offerPrice) formData.append(\"offerPrice\", parseFloat(data.offerPrice));\n    if (data.discountPercentage)\n      formData.append(\"discountPercentage\", parseFloat(data.discountPercentage) || 0);\n    if (data.quantity) formData.append(\"quantity\", parseInt(data.quantity));\n\n    // form data.append JSON.stringify(data)\n    if (productTags) formData.append(\"tags\", JSON.stringify(productTags));\n    if (libraryUrls) formData.append(\"libraryUrls\", JSON.stringify(libraryUrls))\n    if (data.color?.length > 0) formData.append(\"color\", JSON.stringify(data?.color));\n    if (data.size?.length > 0) formData.append(\"size\", JSON.stringify(data?.size));\n    if (data.categories?.length > 0)\n      formData.append(\"categories\", JSON.stringify(data?.categories));\n    if (data.subcategories?.length > 0)\n      formData.append(\"subcategories\", JSON.stringify(data?.subcategories));\n    if (data.subcategoryChildren?.length > 0)\n      formData.append(\"subcategoryChildren\", JSON.stringify(data?.subcategoryChildren));\n\n    if (id) {\n      remainingImages.forEach((img) => {\n        formData.append(\"prevImage\", img);\n      });\n\n      updateSingleProduct({ id, data: formData });\n    } else {\n      adSingleProduct(formData);\n    }\n    console.log(data)\n  };\n\n  return (\n    <CRow>\n      <CCol xs={12}>\n        <CCard className=\"mb-4\">\n          <CCardHeader>\n            <div className=\"d-flex justify-content-between\">\n              <strong>{id ? \"Edit\" : \"Add\"} Product</strong>\n              <div className=\"\">\n                <CButton\n                  disabled={addLoading || updateLoading}\n                  type=\"submit\"\n                  form=\"addProductForm1\"\n                  color=\"success\"\n                  className=\"\"\n                >\n                  <CIcon icon={cilSave} className=\"me-2\" />\n                  {addLoading || updateLoading ? \"Loading...\" : id ? \"Update\" : \" Save\"}\n                </CButton>\n                <CTooltip content=\"Back\">\n                  <CButton onClick={() => navigate(-1)} color=\"\" className=\"border ms-2\">\n                    <Image fluid src={back} style={{ width: \"20px\" }} />\n                  </CButton>\n                </CTooltip>\n              </div>\n            </div>\n          </CCardHeader>\n          <CCardBody>\n            {isLoading ? (\n              <Loading />\n            ) : !isError ? (\n              <AddProductForm\n                images={imgData}\n                setImages={setImgData}\n                data={product?.result}\n                description={description}\n                setDescription={setDescription}\n                shortDescription={shortDescription}\n                setShortDescription={setShortDescription}\n                specification={specification}\n                setSpecification={setSpecification}\n                productTags={productTags}\n                setProductTags={setProductTags}\n                selectedStatus={selectedStatus}\n                setSelectedStatus={setSelectedStatus}\n                loading={addLoading | updateLoading}\n                onSubmit={handleCreateProduct}\n                remainingImages={remainingImages}\n                setRemainingImages={setRemainingImages}\n                manufacturer={manufacturer}\n                setManufacturer={setManufacturer}\n                slugValue={slugValue}\n                libraryUrls={libraryUrls}\n                setLibraryUrls={setLibraryUrls}\n                setSlugValue={setSlugValue}\n              />\n            ) : (\n              <p>There was an error</p>\n            )}\n          </CCardBody>\n        </CCard>\n      </CCol>\n    </CRow>\n  );\n};\n\nexport default AddProduct;\n"],"names":["AddProduct","id","useParams","productId","setProductId","useState","description","setDescription","shortDescription","setShortDescription","specification","setSpecification","libraryUrls","setLibraryUrls","productTags","setProductTags","selectedStatus","setSelectedStatus","imgData","setImgData","manufacturer","setManufacturer","slugValue","setSlugValue","remainingImages","setRemainingImages","updateSingleProduct","isLoading","updateLoading","isSuccess","updateSuccess","isError","updateError","error","updateErrorMsg","useUpdateSingleProductMutation","adSingleProduct","addLoading","addSuccess","addError","addErrorMsg","useAddSingleProductMutation","data","product","useGetSingleProductDetailsQuery","skip","useMemo","_updateErrorMsg$data","_addErrorMsg$data","toast","message","navigate","useNavigate","useEffect","_product$result","_product$result2","_product$result3","_product$result4","_product$result5","_product$result5$manu","_product$result6","result","tags","_id","slug","_jsx","CRow","children","CCol","xs","_jsxs","CCard","className","CCardHeader","CButton","disabled","type","form","color","CIcon","icon","cilSave","CTooltip","content","onClick","Image","fluid","src","back","style","width","CCardBody","Loading","AddProductForm","images","setImages","loading","onSubmit","_data$color","_data$size","_data$categories","_data$subcategories","_data$subcategoryChil","formData","FormData","key","Object","keys","append","name","altTag","freeShipping","status","productType","expireDate","model","price","parseFloat","offerPrice","discountPercentage","quantity","parseInt","JSON","stringify","length","size","categories","subcategories","subcategoryChildren","forEach","img","console","log"],"sourceRoot":""}