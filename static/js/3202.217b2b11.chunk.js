"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[3202],{83202:(e,s,r)=>{r.r(s),r.d(s,{default:()=>g});var a=r(78983),d=r(72791),l=r(95048),i=r(57689),n=r(9085),o=r(42439),t=r(24846),c=r(61134),m=r(39126),u=r(73779),x=r(5560),j=r(80184);const h=e=>{let{data:s,isLoading:r,onSubmit:l,setRole:n}=e;const{register:h,handleSubmit:p,formState:{errors:b},setValue:v}=(0,c.cI)(),g=(0,i.TH)().search,[w,N]=(0,d.useState)(!1),[f,E]=(0,d.useState)(!1),S=[{value:"admin",label:"Admin"},{value:"manager",label:"Manager"}],[P,y]=(0,d.useState)(null);return(0,d.useEffect)((()=>{const e=null===s||void 0===s?void 0:s.role,r=S.find((s=>s.value===e));y(r)}),[s]),(0,j.jsxs)(a.lx,{onSubmit:p(l),children:[(0,j.jsxs)(a.rb,{className:"g-3",children:[(0,j.jsxs)(a.L8,{htmlFor:"oldPassword",children:["Name ",!s&&(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsxs)(a.b7,{xs:12,children:[(0,j.jsx)(a.jO,{type:"text",id:"firstNameInputField",placeholder:"Enter Name",defaultValue:null===s||void 0===s?void 0:s.name,"aria-describedby":"adminName",...h("name",{required:!s})}),(null===b||void 0===b?void 0:b.name)&&(0,j.jsx)("div",{className:"text-danger form-error",children:"Name is required"})]}),(0,j.jsxs)(a.b7,{xs:12,children:[(0,j.jsxs)(a.L8,{htmlFor:"oldPassword",children:["Email ",!s&&(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(a.jO,{type:"text",id:"emailInputField",placeholder:"Enter Email",disabled:!!s,defaultValue:null===s||void 0===s?void 0:s.email,"aria-describedby":"emailInputField",...h("email",{required:!s})}),(null===b||void 0===b?void 0:b.email)&&(0,j.jsx)("div",{className:"text-danger form-error",children:"Email is required "})]}),s&&(0,j.jsxs)(a.b7,{xs:12,children:[(0,j.jsx)(a.L8,{htmlFor:"Password",children:"Enter old password"}),(0,j.jsxs)(a.YR,{children:[(0,j.jsx)(a.jO,{type:w?"text":"password",id:"Password",placeholder:"Enter old password","aria-describedby":"Password",className:"border-end-0",...h("oldPassword",{required:!1})}),(0,j.jsx)(a.wV,{className:"border-start-0 bg-transparent",style:{cursor:"pointer"},onClick:()=>N((e=>!e)),children:w?(0,j.jsx)(m.rCC,{}):(0,j.jsx)(m.I$m,{})})]})]}),(0,j.jsxs)(a.b7,{xs:12,children:[(0,j.jsxs)(a.L8,{htmlFor:"Password",children:[s?"Enter new password":"Password"," ",!s&&(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsxs)(a.YR,{children:[(0,j.jsx)(a.jO,{type:f?"text":"password",id:"Password",placeholder:"Enter password","aria-describedby":"Password",className:"border-end-0",...h("password",{required:!s})}),(0,j.jsx)(a.wV,{className:"border-start-0 bg-transparent",style:{cursor:"pointer"},onClick:()=>E((e=>!e)),children:f?(0,j.jsx)(m.rCC,{}):(0,j.jsx)(m.I$m,{})})]}),(null===b||void 0===b?void 0:b.password)&&(0,j.jsx)("div",{className:"text-danger form-error",children:"Password is required"})]})]}),!g.includes("superAdmin")&&P&&(0,j.jsxs)(a.b7,{xs:12,children:[(0,j.jsxs)("label",{className:"mb-2",children:["Role ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(x.ZP,{"aria-label":"Selection Field",defaultValue:P,options:S,onChange:e=>n(e.value),name:"role"})]}),!s&&(0,j.jsxs)(a.b7,{xs:12,children:[(0,j.jsxs)("label",{className:"mb-2",children:["Role ",(0,j.jsx)("span",{className:"text-danger",children:"*"})," "]}),(0,j.jsx)(x.ZP,{"aria-label":"Selection Field",defaultValue:P,options:S,onChange:e=>n(e.value),name:"role"})]}),(0,j.jsxs)("div",{className:"text-end",children:[(0,j.jsx)(u.Z,{}),(0,j.jsxs)(a.u5,{type:"submit",color:"primary",className:"mt-3",children:[(0,j.jsx)(t.Z,{icon:o.q,className:"me-2"}),r?"Loading..":"Save"]})]})]})},p=(0,d.memo)(h);var b=r(40369),v=r(39432);const g=()=>{const{email:e}=(0,l.v9)((e=>e.auth))||{},s=(0,i.s0)(),r=(0,i.TH)().search,[o,t]=(0,d.useState)("manager"),{id:c}=(0,i.UO)(),[m,u]=(0,d.useState)(!0),{data:x,isLoading:h,isError:g}=(0,b.t6)(c,{skip:m}),[w,{isLoading:N,error:f,isError:E,isSuccess:S}]=(0,b.UR)(),[P,{isLoading:y,error:L,isError:A,isSuccess:C}]=(0,b.SK)(),[F,{isLoading:q,error:k,isError:R,isSuccess:V}]=(0,b.j7)();(0,d.useMemo)((()=>{c&&u(!1)}),[c,u]);return(0,d.useEffect)((()=>{var e,s,r;n.Am.dismiss(),E&&n.Am.error((null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.message)||"Added failed",{id:"aError"}),A&&n.Am.error((null===L||void 0===L||null===(s=L.data)||void 0===s?void 0:s.message)||"Updated failed",{id:"aError"}),R&&n.Am.error((null===k||void 0===k||null===(r=k.data)||void 0===r?void 0:r.message)||"Updated failed",{id:"adminError"})}),[E,A,R]),(0,d.useEffect)((()=>{n.Am.dismiss(),S&&s(-1),C&&s(-1),V&&s(-1)}),[S,C,V]),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(a.rb,{children:(0,j.jsx)(a.b7,{xs:12,children:(0,j.jsxs)(a.xH,{className:"mb-4",children:[(0,j.jsx)(v.Z,{title:c?"Update admin":"Add admin"}),(0,j.jsx)(a.sl,{children:(0,j.jsx)(p,{isLoading:y||N||q,data:x,setRole:t,onSubmit:s=>{const a={...s,currentUserEmail:e,role:o};c?r.includes("superAdmin")?F({email:e,data:a}):P({id:c,data:a}):w(a)}})})]})})})})}}}]);
//# sourceMappingURL=3202.217b2b11.chunk.js.map