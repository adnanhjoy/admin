"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[6487],{76304:(e,s,i)=>{i.r(s),i.d(s,{default:()=>m});var a=i(72282),t=i(24846),r=i(78983),n=i(72791),l=i(92592),d=i(57689),o=i(9085),u=i(94444),c=i(67060),p=i(43034),v=i(98859),g=i(80184);const m=()=>{const{id:e}=(0,d.UO)(),[s,i]=(0,n.useState)(!0),[m,f]=(0,n.useState)(""),[S,h]=(0,n.useState)(""),[y,x]=(0,n.useState)(""),[b,j]=(0,n.useState)([]),[N,P]=(0,n.useState)([]),[T,k]=(0,n.useState)(),[D,O]=(0,n.useState)([]),[w,E]=(0,n.useState)(""),[J,C]=(0,n.useState)(),[F,I]=(0,n.useState)([]),[L,{isLoading:U,isSuccess:Z,isError:q,error:z}]=(0,c.Ey)(),[A,{isLoading:M,isSuccess:V,isError:B,error:H}]=(0,c.Qw)(),{data:Q,isLoading:R,isError:_}=(0,c.T9)(e,{skip:s});(0,n.useMemo)((()=>{var e,s;q&&o.Am.error(null===z||void 0===z||null===(e=z.data)||void 0===e?void 0:e.message),B&&o.Am.error(null===H||void 0===H||null===(s=H.data)||void 0===s?void 0:s.message)}),[q,B]);const G=(0,d.s0)();(0,n.useEffect)((()=>{Z&&G("/product"),V&&G("/product")}),[Z,V]),(0,n.useMemo)((()=>{var s,a,t,r,n,l,d;e&&(i(!1),P(null===Q||void 0===Q||null===(s=Q.result)||void 0===s?void 0:s.tags),f(null===Q||void 0===Q||null===(a=Q.result)||void 0===a?void 0:a.description),h(null===Q||void 0===Q||null===(t=Q.result)||void 0===t?void 0:t.shortDescription),x(null===Q||void 0===Q||null===(r=Q.result)||void 0===r?void 0:r.specification),E(null===Q||void 0===Q||null===(n=Q.result)||void 0===n||null===(l=n.manufacturer)||void 0===l?void 0:l._id),C(null===Q||void 0===Q||null===(d=Q.result)||void 0===d?void 0:d.slug))}),[e,null===Q||void 0===Q?void 0:Q.result]);return(0,g.jsx)(r.rb,{children:(0,g.jsx)(r.b7,{xs:12,children:(0,g.jsxs)(r.xH,{className:"mb-4",children:[(0,g.jsx)(r.bn,{children:(0,g.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,g.jsxs)("strong",{children:[e?"Edit":"Add"," Product"]}),(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)(r.u5,{disabled:M||U,type:"submit",form:"addProductForm1",color:"success",className:"",children:[(0,g.jsx)(t.Z,{icon:a.F,className:"me-2"}),M||U?"Loading...":e?"Update":" Save"]}),(0,g.jsx)(r.If,{content:"Back",children:(0,g.jsx)(r.u5,{onClick:()=>G(-1),color:"",className:"border ms-2",children:(0,g.jsx)(l.Z,{fluid:!0,src:v,style:{width:"20px"}})})})]})]})}),(0,g.jsx)(r.sl,{children:R?(0,g.jsx)(p.Z,{}):_?(0,g.jsx)("p",{children:"There was an error"}):(0,g.jsx)(u.Z,{images:D,setImages:O,data:null===Q||void 0===Q?void 0:Q.result,description:m,setDescription:f,shortDescription:S,setShortDescription:h,specification:y,setSpecification:x,productTags:N,setProductTags:P,selectedStatus:T,setSelectedStatus:k,loading:M|U,onSubmit:s=>{var i,a,t,r,n;const l=new FormData;for(const e of Object.keys(D))l.append("images",s.images[e]);l.append("flashSale",!1),s.name&&l.append("name",s.name),s.altTag&&l.append("altTag",s.altTag),m&&l.append("description",m),S&&l.append("shortDescription",S),y&&l.append("specification",y),J&&l.append("slug",J),s.freeShipping&&l.append("freeShipping",s.freeShipping),w&&"Pick one"!==w&&l.append("manufacturer",w),s.status&&l.append("status",s.status),s.productType&&l.append("productType",s.productType),s.expireDate&&l.append("expireDate",s.expireDate),l.append("model",s.model),s.price&&l.append("price",parseFloat(s.price)),s.offerPrice&&l.append("offerPrice",parseFloat(s.offerPrice)),s.discountPercentage&&l.append("discountPercentage",parseFloat(s.discountPercentage)||0),s.quantity&&l.append("quantity",parseInt(s.quantity)),N&&l.append("tags",JSON.stringify(N)),b&&l.append("libraryUrls",JSON.stringify(b)),(null===(i=s.color)||void 0===i?void 0:i.length)>0&&l.append("color",JSON.stringify(null===s||void 0===s?void 0:s.color)),(null===(a=s.size)||void 0===a?void 0:a.length)>0&&l.append("size",JSON.stringify(null===s||void 0===s?void 0:s.size)),null!==(t=s.categories)&&void 0!==t&&t.value&&l.append("categories",JSON.stringify(null===s||void 0===s?void 0:s.categories.value)),null!==(r=s.subcategories)&&void 0!==r&&r.value&&l.append("subcategories",JSON.stringify(null===s||void 0===s?void 0:s.subcategories.value)),null!==(n=s.subcategoryChildren)&&void 0!==n&&n.value&&l.append("subcategoryChildren",JSON.stringify(null===s||void 0===s?void 0:s.subcategoryChildren.value)),e?(F.forEach((e=>{l.append("prevImage",e)})),L({id:e,data:l})):A(l)},remainingImages:F,setRemainingImages:I,manufacturer:w,setManufacturer:E,slugValue:J,libraryUrls:b,setLibraryUrls:j,setSlugValue:C})})]})})})}}}]);
//# sourceMappingURL=6487.2fa74052.chunk.js.map