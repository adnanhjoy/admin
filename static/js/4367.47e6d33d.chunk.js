"use strict";(self.webpackChunkmarcella=self.webpackChunkmarcella||[]).push([[4367],{14367:(e,s,i)=>{i.r(s),i.d(s,{default:()=>h});var d=i(78983),r=i(72791),a=i(57689),l=i(9085),t=i(72282),n=i(24846),c=i(92592),u=i(61134),o=i(73779),m=i(80184);const x=e=>{var s,i,a,l;let{data:x,onSubmit:p,updateLoading:g,addLoading:j,error:h}=e;const{register:v,handleSubmit:b,setValue:f,formState:{errors:y}}=(0,u.cI)();return(0,r.useEffect)((()=>{if(x)for(const e in x)f(e,x[e])}),[x,f]),(0,m.jsxs)(d.lx,{encType:"multipart/form-data",onSubmit:b(p),children:[(0,m.jsxs)(d.rb,{className:"g-3",children:[(0,m.jsxs)(d.b7,{xs:12,children:[(0,m.jsx)(d.jO,{type:"text",id:"titleInputField",label:"Title",placeholder:"Enter Title","aria-describedby":"titleInputField",...v("title",{required:{value:!0,message:"Title is required"}})}),"required"===(null===y||void 0===y||null===(s=y.title)||void 0===s?void 0:s.type)&&(0,m.jsx)("p",{className:"text-danger",children:y.title.message})]}),(0,m.jsxs)(d.b7,{xs:12,children:[(0,m.jsx)(d.PB,{id:"rulesDescriptionTextareaField",label:"Description",placeholder:"Enter Description","aria-describedby":"rulesDescriptionTextareaField",rows:"3",...v("description",{required:{value:!1,message:"Rules description is required"}})}),"required"===(null===y||void 0===y||null===(i=y.description)||void 0===i?void 0:i.type)&&(0,m.jsx)("p",{className:"text-danger",children:y.description.message})]}),(0,m.jsxs)(d.b7,{xs:12,children:[(0,m.jsx)(d.jO,{type:"file",id:"fileInputField",name:"image",label:"Rules Image",placeholder:"Enter image","aria-describedby":"imageInputField",...v("image",{required:{value:!0,message:"Image is required"}})}),"required"===(null===y||void 0===y||null===(a=y.title)||void 0===a?void 0:a.type)&&(0,m.jsx)("p",{className:"text-danger",children:y.title.message}),(null===x||void 0===x?void 0:x.image)&&(0,m.jsx)(d.b7,{className:"mt-2",md:3,xs:1,children:(0,m.jsx)(c.Z,{src:null===x||void 0===x?void 0:x.image,alt:"Rules Img",fluid:!0})})]})]}),h&&(0,m.jsx)("p",{className:"text-danger mt-2 text-end",children:null===h||void 0===h||null===(l=h.data)||void 0===l?void 0:l.message}),(0,m.jsxs)("div",{className:"text-end",children:[(0,m.jsx)(o.Z,{}),(0,m.jsx)(d.u5,{type:"submit",color:"success",className:"mt-3 text-white",children:g||j?"Loading":(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.Z,{icon:t.F,className:"me-2"}),x?"Update":"Save"]})})]})]})},p=(0,r.memo)(x);var g=i(30148),j=i(43034);const h=()=>{const{id:e}=(0,a.UO)(),[s,i]=(0,r.useState)(!0),t=(0,a.s0)(),{data:n,isLoading:c,isError:u}=(0,g.hH)(e,{skip:s}),[o,{isLoading:x,isSuccess:h,error:v}]=(0,g.zZ)(),[b,{isLoading:f,isSuccess:y,isError:E}]=(0,g.YM)();(0,r.useEffect)((()=>{e&&i(!1)}),[e]);return(0,r.useEffect)((()=>{l.Am.dismiss(),h&&l.Am.success("Added successfully",{id:"aSuccess"}),y&&l.Am.success("Updated successfully",{id:"uSuccess"}),E&&l.Am.error("Update failed",{id:"uError"}),v&&l.Am.error("Added failed",{id:"aError"})}),[E,y,h,v]),(0,r.useEffect)((()=>{h&&t(-1),y&&t(-1)}),[h,y]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(d.rb,{children:(0,m.jsx)(d.b7,{xs:12,children:(0,m.jsxs)(d.xH,{className:"mb-4",children:[(0,m.jsx)(d.bn,{children:(0,m.jsxs)("strong",{children:[e?"Edit":"Add"," Rules"]})}),(0,m.jsx)(d.sl,{children:c?(0,m.jsx)(j.Z,{}):(0,m.jsx)(p,{addLoading:x,updateLoading:f,data:null===n||void 0===n?void 0:n.result,onSubmit:s=>{const i=new FormData,d=s.image[0];i.append("image",d),i.append("title",s.title),i.append("description",s.description),e?b({id:e,data:i}):o(i)},error:v})})]})})})})}}}]);
//# sourceMappingURL=4367.47e6d33d.chunk.js.map