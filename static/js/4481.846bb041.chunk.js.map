{"version":3,"file":"static/js/4481.846bb041.chunk.js","mappings":"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","sources":["components/rules/AddRulesForm.js","redux/rules/rulesApi.js","views/admins/rules/add-rules/AddRules.jsx"],"sourcesContent":["/* eslint-disable prettier/prettier */\n/* eslint-disable react/prop-types */\n\nimport { cilSave } from \"@coreui/icons\";\nimport CIcon from \"@coreui/icons-react\";\nimport { CButton, CCol, CForm, CFormInput, CFormTextarea, CRow } from \"@coreui/react\";\nimport PropTypes from \"prop-types\";\nimport { memo } from \"react\";\nimport { useEffect } from \"react\";\nimport { Image } from \"react-bootstrap\";\nimport { useForm } from \"react-hook-form\";\nimport CancelButton from \"src/ui/button/CancelButton\";\n\nconst AddRulesForm = ({ data, onSubmit, updateLoading, addLoading, error }) => {\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: { errors },\n  } = useForm();\n\n  useEffect(() => {\n    if (data) {\n      for (const key in data) {\n        setValue(key, data[key]);\n      }\n    }\n  }, [data, setValue]);\n\n  return (\n    <CForm encType=\"multipart/form-data\" onSubmit={handleSubmit(onSubmit)}>\n      <CRow className=\"g-3\">\n        <CCol xs={12}>\n          <CFormInput\n            type=\"text\"\n            id=\"titleInputField\"\n            label=\"Title\"\n            placeholder=\"Enter Title\"\n            aria-describedby=\"titleInputField\"\n            {...register(\"title\", {\n              required: { value: true, message: \"Title is required\" },\n            })}\n          />\n          {errors?.title?.type === \"required\" && (\n            <p className=\"text-danger\">{errors.title.message}</p>\n          )}\n        </CCol>\n        <CCol xs={12}>\n          <CFormTextarea\n            id=\"rulesDescriptionTextareaField\"\n            label=\"Description\"\n            placeholder=\"Enter Description\"\n            aria-describedby=\"rulesDescriptionTextareaField\"\n            rows=\"3\"\n            {...register(\"description\", {\n              required: {\n                value: false,\n                message: \"Rules description is required\",\n              },\n            })}\n          ></CFormTextarea>\n          {errors?.description?.type === \"required\" && (\n            <p className=\"text-danger\">{errors.description.message}</p>\n          )}\n        </CCol>\n\n        <CCol xs={12}>\n          <CFormInput\n            type=\"file\"\n            id=\"fileInputField\"\n            name=\"image\"\n            label=\"Rules Image\"\n            placeholder=\"Enter image\"\n            aria-describedby=\"imageInputField\"\n            {...register(\"image\", {\n              required: { value: true, message: \"Image is required\" },\n            })}\n          />\n\n          {errors?.title?.type === \"required\" && (\n            <p className=\"text-danger\">{errors.title.message}</p>\n          )}\n          {data?.image && (\n            <CCol className=\"mt-2\" md={3} xs={1}>\n              <Image src={data?.image} alt={`Rules Img`} fluid />\n            </CCol>\n          )}\n        </CCol>\n      </CRow>\n      {error && <p className=\"text-danger mt-2 text-end\">{error?.data?.message}</p>}\n      <div className=\"text-end\">\n        <CancelButton />\n        <CButton type=\"submit\" color=\"success\" className=\"mt-3 text-white\">\n          {updateLoading || addLoading ? (\n            \"Loading\"\n          ) : (\n            <>\n              <CIcon icon={cilSave} className=\"me-2\" />\n              {data ? \"Update\" : \"Save\"}\n            </>\n          )}\n        </CButton>\n      </div>\n    </CForm>\n  );\n};\n\nexport default memo(AddRulesForm);\n\nAddRulesForm.propTypes = {\n  data: PropTypes.object,\n  onSubmit: PropTypes.func,\n};\n","/* eslint-disable prettier/prettier */\nimport { apiSlice } from \"../api/apiSlice\";\n\nexport const rulseApi = apiSlice.injectEndpoints({\n  tagTypes: [\"Rules\", \"SingleRules\"],\n  endpoints: (builder) => ({\n    //get all  Rules\n    getAllRules: builder.query({\n      query: () => ({\n        url: `/rules`,\n        method: \"GET\",\n      }),\n      providesTags: [\"Rules\"],\n    }),\n\n    //get single Rules by id\n    getSingleRules: builder.query({\n      query: (id) => ({\n        url: `/rules/${id}`,\n        method: \"GET\",\n      }),\n      invalidatesTags: [\"Rules\"],\n      providesTags: [\"SingleRules\"],\n    }),\n\n    //add new Rules\n    addRules: builder.mutation({\n      query: (data) => ({\n        url: `/rules`,\n        method: \"POST\",\n        body: data,\n      }),\n      invalidatesTags: [\"Rules\"],\n    }),\n\n    //update Rules by id\n    updateRules: builder.mutation({\n      query: ({ id, data }) => ({\n        url: `/rules/${id}`,\n        method: \"PUT\",\n        body: data,\n      }),\n      invalidatesTags: [\"Rules\", \"SingleRules\"],\n    }),\n\n    // deleteRules by id\n    deleteRules: builder.mutation({\n      query: (id) => ({\n        url: `/Rules/${id}`,\n        method: \"DELETE\",\n        body: id,\n        headers: {\n          Authorization: JSON.parse(localStorage.getItem(\"auth\")).accessToken,\n        },\n      }),\n      invalidatesTags: [\"Rules\"],\n    }),\n  }),\n});\n\nexport const {\n  useAddRulesMutation,\n  useGetAllRulesQuery,\n  useDeleteRulesMutation,\n  useGetSingleRulesQuery,\n  useUpdateRulesMutation,\n} = rulseApi;\n","/* eslint-disable react-hooks/exhaustive-deps */\n/* eslint-disable prettier/prettier */\nimport { CCard, CCardBody, CCardHeader, CCol, CRow } from \"@coreui/react\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport AddRulesForm from \"src/components/rules/AddRulesForm\";\n\nimport {\n  useAddRulesMutation,\n  useGetSingleRulesQuery,\n  useUpdateRulesMutation,\n} from \"src/redux/rules/rulesApi\";\nimport Loading from \"src/ui/Loading\";\n\nconst AddRules = () => {\n  const { id } = useParams();\n  const [haveId, setHveId] = useState(true);\n  const navigate = useNavigate();\n\n  // get hooks query\n  const {\n    data: rule,\n    isLoading: getLoading,\n    isError: getError,\n  } = useGetSingleRulesQuery(id, { skip: haveId });\n\n  // add mutation\n  const [addRule, { isLoading: addLoading, isSuccess: addSuccess, error: addError }] =\n    useAddRulesMutation();\n  // update mutation\n  const [\n    updateRules,\n    { isLoading: updateLoading, isSuccess: updateSuccess, isError: updateError },\n  ] = useUpdateRulesMutation();\n\n  useEffect(() => {\n    if (id) {\n      setHveId(false);\n    }\n  }, [id]);\n\n  const handleCreateRule = (data) => {\n    const formData = new FormData();\n    const image = data.image[0];\n    formData.append(\"image\", image);\n    formData.append(\"title\", data.title);\n    formData.append(\"description\", data.description);\n    // update\n    if (id) {\n      updateRules({ id, data: formData });\n    } else {\n      // create\n      addRule(formData);\n    }\n  };\n\n  useEffect(() => {\n    toast.dismiss();\n    addSuccess && toast.success(\"Added successfully\", { id: \"aSuccess\" });\n    updateSuccess && toast.success(\"Updated successfully\", { id: \"uSuccess\" });\n\n    updateError &&\n      toast.error(\"Update failed\", {\n        id: \"uError\",\n      });\n    addError &&\n      toast.error(\"Added failed\", {\n        id: \"aError\",\n      });\n  }, [updateError, updateSuccess, addSuccess, addError]);\n\n  useEffect(() => {\n    addSuccess && navigate(-1);\n    updateSuccess && navigate(-1);\n  }, [addSuccess, updateSuccess]);\n\n  return (\n    <>\n      <CRow>\n        <CCol xs={12}>\n          <CCard className=\"mb-4\">\n            <CCardHeader>\n              <strong>{id ? \"Edit\" : \"Add\"} Rules</strong>\n            </CCardHeader>\n\n            <CCardBody>\n              {!getLoading ? (\n                <AddRulesForm\n                  addLoading={addLoading}\n                  updateLoading={updateLoading}\n                  data={rule?.result}\n                  onSubmit={handleCreateRule}\n                  error={addError}\n                />\n              ) : (\n                <Loading />\n              )}\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow>\n    </>\n  );\n};\n\nexport default AddRules;\n"],"names":["AddRulesForm","_ref","_errors$title","_errors$description","_errors$title2","_error$data","data","onSubmit","updateLoading","addLoading","error","register","handleSubmit","setValue","formState","errors","useForm","useEffect","key","_jsxs","CForm","encType","children","CRow","className","CCol","xs","_jsx","CFormInput","type","id","label","placeholder","required","value","message","title","CFormTextarea","rows","description","name","image","md","Image","src","alt","fluid","CancelButton","CButton","color","_Fragment","CIcon","icon","cilSave","memo","rulseApi","injectEndpoints","tagTypes","endpoints","builder","getAllRules","query","url","method","providesTags","getSingleRules","concat","invalidatesTags","addRules","mutation","body","updateRules","deleteRules","headers","Authorization","JSON","parse","localStorage","getItem","accessToken","useAddRulesMutation","useGetAllRulesQuery","useDeleteRulesMutation","useGetSingleRulesQuery","useUpdateRulesMutation","AddRules","useParams","haveId","setHveId","useState","navigate","useNavigate","rule","isLoading","getLoading","isError","getError","skip","addRule","isSuccess","addSuccess","addError","updateSuccess","updateError","toast","dismiss","success","CCard","CCardHeader","CCardBody","Loading","result","formData","FormData","append"],"sourceRoot":""}